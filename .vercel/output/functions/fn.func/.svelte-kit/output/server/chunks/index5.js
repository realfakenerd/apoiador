import{d as t,w as e}from"./index2.js";import{h as n,i as a,n as o,l as s,u as i,a as r}from"./index4.js";import{s as d,E as l,u,m as c}from"./updater.js";import{g as f,n as p,o as g}from"./ssr.js";import{flip as m,offset as y,shift as h,arrow as b,size as x,autoUpdate as w,computePosition as v}from"@floating-ui/dom";import{a as $}from"./utils.js";function O(t){t.setAttribute("data-highlighted","")}function A(t){t.removeAttribute("data-highlighted")}function C(e){const{open:n,forceVisible:a,activeTrigger:o}=e;return t([n,a,o],(([t,e,n])=>(t||e)&&null!==n))}function j(t){n&&d(1).then((()=>{const e=document.activeElement;a(e)&&e!==t&&(e.tabIndex=-1,t&&(t.tabIndex=0,t.focus()))}))}function T(){return Array.from(document.querySelectorAll('a[href]:not([tabindex="-1"]), button:not([disabled]):not([tabindex="-1"]), input:not([disabled]):not([tabindex="-1"]), select:not([disabled]):not([tabindex="-1"]), textarea:not([disabled]):not([tabindex="-1"]), [tabindex]:not([tabindex="-1"])'))}function W(t){const e=T(),n=e.indexOf(t)+1,o=e[n];return n<e.length&&a(o)?o:null}function k(t){const e=T(),n=e.indexOf(t)-1,o=e[n];return n>=0&&a(o)?o:null}const M=new Set(["Shift","Control","Alt","Meta","CapsLock","NumLock"]),P={onMatch:j,getCurrentItem:()=>document.activeElement};function S(t={}){const n={...P,...t},o=e([]),s=function(t,e=500){let n=null;return function(...a){n&&clearTimeout(n),n=setTimeout((()=>{n=null,t(...a)}),e)}}((()=>{o.update((()=>[]))}));return{typed:o,resetTyped:s,handleTypeaheadSearch:(t,e)=>{if(M.has(t))return;const i=n.getCurrentItem(),r=f(o);if(!Array.isArray(r))return;r.push(t.toLowerCase()),o.set(r);const d=e.filter((t=>"true"!==t.getAttribute("disabled")&&"true"!==t.getAttribute("aria-disabled")&&!t.hasAttribute("data-disabled"))),u=r.length>1&&r.every((t=>t===r[0]))?r[0]:r.join(""),c=a(i)?d.indexOf(i):-1;let p=l(d,Math.max(c,0));1===u.length&&(p=p.filter((t=>t!==i)));const g=p.find((t=>t?.innerText&&t.innerText.toLowerCase().startsWith(u.toLowerCase())));a(g)&&g!==i&&n.onMatch(g),s()}}}const I={strategy:"absolute",placement:"top",gutter:5,flip:!0,sameWidth:!1,overflowPadding:8},L={bottom:"rotate(45deg)",left:"rotate(135deg)",top:"rotate(225deg)",right:"rotate(315deg)"};const D={floating:{},focusTrap:{},clickOutside:{},escapeKeydown:{},portal:"body"},E=(t,e)=>{t.dataset.escapee="";const{anchorElement:n,open:d,options:l}=e;if(!n||!d||!l)return{destroy:o};const f={...D,...l},p=[];if(null!==f.portal){const e=u(t,f.portal);e?.destroy&&p.push(e.destroy)}if(p.push(function(t,e,n={}){if(!e||!t||null===n)return{destroy:o};const s={...I,...n},i=e.querySelector("[data-arrow=true]"),r=[];s.flip&&r.push(m({boundary:s.boundary,padding:s.overflowPadding}));const d=a(i)?i.offsetHeight/2:0;if(s.gutter||s.offset){const t=s.gutter?{mainAxis:s.gutter}:s.offset;null!=t?.mainAxis&&(t.mainAxis+=d),r.push(y(t))}return r.push(h({boundary:s.boundary,crossAxis:s.overlap,padding:s.overflowPadding})),i&&r.push(b({element:i,padding:8})),r.push(x({padding:s.overflowPadding,apply({rects:t,availableHeight:n,availableWidth:a}){s.sameWidth&&Object.assign(e.style,{width:`${Math.round(t.reference.width)}px`,minWidth:"unset"}),s.fitViewport&&Object.assign(e.style,{maxWidth:`${a}px`,maxHeight:`${n}px`})}})),Object.assign(e.style,{position:s.strategy}),{destroy:w(t,e,(function(){if(!t||!e)return;const{placement:n,strategy:o}=s;v(t,e,{placement:n,middleware:r,strategy:o}).then((t=>{const n=Math.round(t.x),o=Math.round(t.y);if(Object.assign(e.style,{position:s.strategy,top:`${o}px`,left:`${n}px`}),a(i)&&t.middlewareData.arrow){const{x:e,y:n}=t.middlewareData.arrow,a=t.placement.split("-")[0];Object.assign(i.style,{position:"absolute",left:null!=e?`${e}px`:"",top:null!=n?`${n}px`:"",[a]:`calc(100% - ${d}px)`,transform:L[a],backgroundColor:"inherit",zIndex:"inherit"})}return t}))}))}}(n,t,f.floating).destroy),null!==f.focusTrap){const{useFocusTrap:e}=c({immediate:!0,escapeDeactivates:!1,allowOutsideClick:!0,returnFocusOnDeactivate:!1,fallbackFocus:t,...f.focusTrap}),n=e(t);n?.destroy&&p.push(n.destroy)}null!==f.clickOutside&&p.push(s(t,{enabled:d,handler:t=>{t.defaultPrevented||a(n)&&!n.contains(t.target)&&(d.set(!1),n.focus())},...f.clickOutside}).destroy),null!==f.escapeKeydown&&p.push(i(t,{enabled:d,handler:()=>{d.set(!1)},...f.escapeKeydown}).destroy);const g=r(...p);return{destroy(){g()}}};let F=(t=21)=>{let e="",n=t;for(;n--;)e+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return e};function H(t){return(e={})=>function(t,e){const n={side:"bottom",align:"center",sideOffset:0,alignOffset:0,sameWidth:!1,avoidCollisions:!0,collisionPadding:8,fitViewport:!1,...e};t.update((t=>({...t,placement:K(n.side,n.align),offset:{...t.offset,mainAxis:n.sideOffset,crossAxis:n.alignOffset},gutter:0,sameWidth:n.sameWidth,flip:n.avoidCollisions,overflowPadding:n.collisionPadding,boundary:n.collisionBoundary})))}(t,e)}function K(t,e){return"center"===e?t:`${t}-${e}`}function V(t,{delay:e=0,duration:n=400,easing:a=g}={}){const o=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:a,css:t=>"opacity: "+t*o}}function q(t,{delay:e=0,duration:n=400,easing:a=$,x:o=0,y:s=0,opacity:i=0}={}){const r=getComputedStyle(t),d=+r.opacity,l="none"===r.transform?"":r.transform,u=d*(1-i),[c,f]=p(o),[g,m]=p(s);return{delay:e,duration:n,easing:a,css:(t,e)=>`\n\t\t\ttransform: ${l} translate(${(1-t)*c}${f}, ${(1-t)*g}${m});\n\t\t\topacity: ${d-u*e}`}}function z(t,{delay:e=0,duration:n=400,easing:a=$,start:o=0,opacity:s=0}={}){const i=getComputedStyle(t),r=+i.opacity,d="none"===i.transform?"":i.transform,l=1-o,u=r*(1-s);return{delay:e,duration:n,easing:a,css:(t,e)=>`\n\t\t\ttransform: ${d} scale(${1-l*e});\n\t\t\topacity: ${r-u*e}\n\t\t`}}export{k as a,O as b,S as c,C as d,H as e,V as f,W as g,j as h,q as i,F as n,A as r,z as s,E as u};
