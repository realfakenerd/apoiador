import{b as e,a as t,r,p as n,o as s,s as o,c as a,g as i}from"./chunks/internal.js";import{t as c,H as u,j as l,N as f,R as p,e as d,A as h}from"./chunks/index.js";import{w as g,r as y}from"./chunks/index2.js";const m="/_svelte_kit_assets",w=["GET","POST","PUT","PATCH","DELETE","OPTIONS","HEAD"],v=["GET","POST","HEAD"];function _(e,t){const r=[];let n;e.split(",").forEach(((e,t)=>{const n=/([^/]+)\/([^;]+)(?:;q=([0-9.]+))?/.exec(e);if(n){const[,e,s,o="1"]=n;r.push({type:e,subtype:s,q:+o,i:t})}})),r.sort(((e,t)=>e.q!==t.q?t.q-e.q:"*"===e.subtype!=("*"===t.subtype)?"*"===e.subtype?1:-1:"*"===e.type!=("*"===t.type)?"*"===e.type?1:-1:e.i-t.i));let s=Infinity;for(const o of t){const[e,t]=o.split("/"),a=r.findIndex((r=>!(r.type!==e&&"*"!==r.type||r.subtype!==t&&"*"!==r.subtype)));-1!==a&&a<s&&(n=o,s=a)}return n}function b(e){return function(e,...t){const r=e.headers.get("content-type")?.split(";",1)[0].trim()??"";return t.includes(r.toLowerCase())}(e,"application/x-www-form-urlencoded","multipart/form-data","text/plain")}function $(e,t,r){const n={},s=e.slice(1),o=s.filter((e=>void 0!==e));let a=0;for(let i=0;i<t.length;i+=1){const e=t[i];let c=s[i-a];if(e.chained&&e.rest&&a&&(c=s.slice(i-a,i+1).filter((e=>e)).join("/"),a=0),void 0!==c)if(e.matcher&&!r[e.matcher](c)){if(!e.optional||!e.chained)return;a++}else{n[e.name]=c;const r=t[i+1],u=s[i+1];r&&!r.rest&&r.optional&&u&&e.chained&&(a=0),r||u||Object.keys(n).length!==o.length||(a=0)}else e.rest&&(n[e.name]="")}if(!a)return n}function k(e,t){return c(`${t} method not allowed`,{status:405,headers:{allow:j(e).join(", ")}})}function j(e){const t=w.filter((t=>t in e));return("GET"in e||"HEAD"in e)&&t.push("HEAD"),t}function S(e,t,r){let n=e.templates.error({status:t,message:r});return c(n,{headers:{"content-type":"text/html; charset=utf-8"},status:t})}async function x(e,t,r){var n;const s=(r=r instanceof u?r:(n=r)instanceof Error||n&&n.name&&n.message?n:new Error(JSON.stringify(n)))instanceof u?r.status:500,o=await O(e,t,r),a=_(e.request.headers.get("accept")||"text/html",["application/json","text/html"]);return e.isDataRequest||"application/json"===a?l(o,{status:s}):S(t,s,o.message)}async function O(e,t,r){return r instanceof u?r.body:await t.hooks.handleError({error:r,event:e})??{message:null===e.route.id&&r instanceof f?"Not Found":"Internal Error"}}function E(e,t){return new Response(void 0,{status:e,headers:{location:t}})}function R(e,t){return t.path?`Data returned from \`load\` while rendering ${e.route.id} is not serializable: ${t.message} (data${t.path})`:""===t.path?`Data returned from \`load\` while rendering ${e.route.id} is not a plain object`:t.message}function A(e){const t=[];return e.uses&&e.uses.dependencies.size>0&&t.push(`"dependencies":${JSON.stringify(Array.from(e.uses.dependencies))}`),e.uses&&e.uses.params.size>0&&t.push(`"params":${JSON.stringify(Array.from(e.uses.params))}`),e.uses?.parent&&t.push('"parent":1'),e.uses?.route&&t.push('"route":1'),e.uses?.url&&t.push('"url":1'),`"uses":{${t.join(",")}}`}function T(e){return e.filter((e=>null!=e))}const P=/^[a-z][a-z\d+\-.]+:/i,q=/^([a-z]+:)?\/?\//;function C(e,t){return"/"===e||"ignore"===t?e:"never"===t?e.endsWith("/")?e.slice(0,-1):e:"always"!==t||e.endsWith("/")?e:e+"/"}function N(e){for(const t in e)e[t]=decodeURIComponent(e[t]);return e}const U=["href","pathname","search","searchParams","toString","toJSON"];function I(e,t){const r=new URL(e);for(const n of U)Object.defineProperty(r,n,{get:()=>(t(),e[n]),enumerable:!0,configurable:!0});return r[Symbol.for("nodejs.util.inspect.custom")]=(t,r,n)=>n(e,r),function(e){D(e),Object.defineProperty(e,"hash",{get(){throw new Error("Cannot access event.url.hash. Consider using `$page.url.hash` inside a component instead")}})}(r),r}function H(e){D(e);for(const t of["search","searchParams"])Object.defineProperty(e,t,{get(){throw new Error(`Cannot access url.${t} on a page with prerendering enabled`)}})}function D(e){e[Symbol.for("nodejs.util.inspect.custom")]=(t,r,n)=>n(new URL(e),r)}const z="/__data.json";function L(e){return e.slice(0,-z.length)}const W={"<":"\\u003C","\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\u2028":"\\u2028","\u2029":"\\u2029"};class M extends Error{constructor(e,t){super(e),this.name="DevalueError",this.path=t.join("")}}function J(e){return Object(e)!==e}const B=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function G(e){const t=Object.getPrototypeOf(e);return t===Object.prototype||null===t||Object.getOwnPropertyNames(t).sort().join("\0")===B}function F(e){return Object.prototype.toString.call(e).slice(8,-1)}function V(e){switch(e){case'"':return'\\"';case"<":return"\\u003C";case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r";case"\t":return"\\t";case"\b":return"\\b";case"\f":return"\\f";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return e<" "?`\\u${e.charCodeAt(0).toString(16).padStart(4,"0")}`:""}}function Z(e){let t="",r=0;const n=e.length;for(let s=0;s<n;s+=1){const n=V(e[s]);n&&(t+=e.slice(r,s)+n,r=s+1)}return`"${0===r?e:t+e.slice(r)}"`}const K="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_$",Q=/[<\b\f\n\r\t\0\u2028\u2029]/g,X=/^(?:do|if|in|for|int|let|new|try|var|byte|case|char|else|enum|goto|long|this|void|with|await|break|catch|class|const|final|float|short|super|throw|while|yield|delete|double|export|import|native|return|switch|throws|typeof|boolean|default|extends|finally|package|private|abstract|continue|debugger|function|volatile|interface|protected|transient|implements|instanceof|synchronized)$/;function Y(e,t){const r=new Map,n=[],s=new Map;!function e(o){if("function"==typeof o)throw new M("Cannot stringify a function",n);if(!J(o)){if(r.has(o))return void r.set(o,r.get(o)+1);if(r.set(o,1),t){const e=t(o);if("string"==typeof e)return void s.set(o,e)}switch(F(o)){case"Number":case"BigInt":case"String":case"Boolean":case"Date":case"RegExp":return;case"Array":o.forEach(((t,r)=>{n.push(`[${r}]`),e(t),n.pop()}));break;case"Set":Array.from(o).forEach(e);break;case"Map":for(const[t,r]of o)n.push(`.get(${J(t)?re(t):"..."})`),e(r),n.pop();break;default:if(!G(o))throw new M("Cannot stringify arbitrary non-POJOs",n);if(Object.getOwnPropertySymbols(o).length>0)throw new M("Cannot stringify POJOs with symbolic keys",n);for(const t in o)n.push(`.${t}`),e(o[t]),n.pop()}}}(e);const o=new Map;function a(e){if(o.has(e))return o.get(e);if(J(e))return re(e);if(s.has(e))return s.get(e);const t=F(e);switch(t){case"Number":case"String":case"Boolean":return`Object(${a(e.valueOf())})`;case"RegExp":return`new RegExp(${Z(e.source)}, "${e.flags}")`;case"Date":return`new Date(${e.getTime()})`;case"Array":const r=e.map(((t,r)=>r in e?a(t):"")),n=0===e.length||e.length-1 in e?"":",";return`[${r.join(",")}${n}]`;case"Set":case"Map":return`new ${t}([${Array.from(e).map(a).join(",")}])`;default:const s=`{${Object.keys(e).map((t=>`${function(e){return/^[_$a-zA-Z][_$a-zA-Z0-9]*$/.test(e)?e:te(JSON.stringify(e))}(t)}:${a(e[t])}`)).join(",")}}`;return null===Object.getPrototypeOf(e)?Object.keys(e).length>0?`Object.assign(Object.create(null),${s})`:"Object.create(null)":s}}Array.from(r).filter((e=>e[1]>1)).sort(((e,t)=>t[1]-e[1])).forEach(((e,t)=>{o.set(e[0],function(e){let t="";do{t=K[e%K.length]+t,e=~~(e/K.length)-1}while(e>=0);return X.test(t)?`${t}0`:t}(t))}));const i=a(e);if(o.size){const e=[],t=[],r=[];return o.forEach(((n,o)=>{if(e.push(n),s.has(o))return void r.push(s.get(o));if(J(o))return void r.push(re(o));switch(F(o)){case"Number":case"String":case"Boolean":r.push(`Object(${a(o.valueOf())})`);break;case"RegExp":r.push(o.toString());break;case"Date":r.push(`new Date(${o.getTime()})`);break;case"Array":r.push(`Array(${o.length})`),o.forEach(((e,r)=>{t.push(`${n}[${r}]=${a(e)}`)}));break;case"Set":r.push("new Set"),t.push(`${n}.${Array.from(o).map((e=>`add(${a(e)})`)).join(".")}`);break;case"Map":r.push("new Map"),t.push(`${n}.${Array.from(o).map((([e,t])=>`set(${a(e)}, ${a(t)})`)).join(".")}`);break;default:r.push(null===Object.getPrototypeOf(o)?"Object.create(null)":"{}"),Object.keys(o).forEach((e=>{t.push(`${n}${function(e){return/^[_$a-zA-Z][_$a-zA-Z0-9]*$/.test(e)?`.${e}`:`[${te(JSON.stringify(e))}]`}(e)}=${a(o[e])}`)}))}})),t.push(`return ${i}`),`(function(${e.join(",")}){${t.join(";")}}(${r.join(",")}))`}return i}function ee(e){return W[e]||e}function te(e){return e.replace(Q,ee)}function re(e){if("string"==typeof e)return Z(e);if(void 0===e)return"void 0";if(0===e&&1/e<0)return"-0";const t=String(e);return"number"==typeof e?t.replace(/^(-)?0\./,"$1."):"bigint"==typeof e?e+"n":t}const ne=-1,se=-2,oe=-3,ae=-4,ie=-5,ce=-6;function ue(e,t){const r=[],n=new Map,s=[];for(const c in t)s.push({key:c,fn:t[c]});const o=[];let a=0;const i=function e(t){if("function"==typeof t)throw new M("Cannot stringify a function",o);if(n.has(t))return n.get(t);if(void 0===t)return ne;if(Number.isNaN(t))return oe;if(Infinity===t)return ae;if(-Infinity===t)return ie;if(0===t&&1/t<0)return ce;const i=a++;n.set(t,i);for(const{key:n,fn:o}of s){const s=o(t);if(s)return r[i]=`["${n}",${e(s)}]`,i}let c="";if(J(t))c=le(t);else{switch(F(t)){case"Number":case"String":case"Boolean":c=`["Object",${le(t)}]`;break;case"BigInt":c=`["BigInt",${t}]`;break;case"Date":c=`["Date","${t.toISOString()}"]`;break;case"RegExp":const{source:r,flags:n}=t;c=n?`["RegExp",${Z(r)},"${n}"]`:`["RegExp",${Z(r)}]`;break;case"Array":c="[";for(let s=0;s<t.length;s+=1)s>0&&(c+=","),s in t?(o.push(`[${s}]`),c+=e(t[s]),o.pop()):c+=se;c+="]";break;case"Set":c='["Set"';for(const s of t)c+=`,${e(s)}`;c+="]";break;case"Map":c='["Map"';for(const[s,a]of t)o.push(`.get(${J(s)?le(s):"..."})`),c+=`,${e(s)},${e(a)}`;c+="]";break;default:if(!G(t))throw new M("Cannot stringify arbitrary non-POJOs",o);if(Object.getOwnPropertySymbols(t).length>0)throw new M("Cannot stringify POJOs with symbolic keys",o);if(null===Object.getPrototypeOf(t)){c='["null"';for(const r in t)o.push(`.${r}`),c+=`,${Z(r)},${e(t[r])}`,o.pop();c+="]"}else{c="{";let r=!1;for(const n in t)r&&(c+=","),r=!0,o.push(`.${n}`),c+=`${Z(n)}:${e(t[n])}`,o.pop();c+="}"}}}return r[i]=c,i}(e);return i<0?`${i}`:`[${r.join(",")}]`}function le(e){const t=typeof e;return"string"===t?Z(e):e instanceof String?Z(e.toString()):void 0===e?ne.toString():0===e&&1/e<0?ce.toString():"bigint"===t?`["BigInt","${e}"]`:String(e)}function fe(e){return"application/json"===_(e.request.headers.get("accept")??"*/*",["application/json","text/html"])&&"POST"===e.request.method}function pe(e){return e instanceof h?new Error('Cannot "throw fail()". Use "return fail()"'):e}function de(e){return he({type:"redirect",status:e.status,location:e.location})}function he(e,t){return l(e,t)}function ge(e){if(e.default&&Object.keys(e).length>1)throw new Error("When using named actions, the default action cannot be used. See the docs for more info: https://kit.svelte.dev/docs/form-actions#named-actions")}async function ye(e,t){const r=new URL(e.request.url);let n="default";for(const o of r.searchParams)if(o[0].startsWith("/")){if(n=o[0].slice(1),"default"===n)throw new Error('Cannot use reserved action name "default"');break}const s=t[n];if(!s)throw new Error(`No action with name '${n}' found`);if(!b(e.request))throw new Error(`Actions expect form-encoded data (received ${e.request.headers.get("content-type")})`);return s(e)}function me(e,t){return we(e,ue,t)}function we(e,t,r){try{return t(e)}catch(n){const e=n;if("path"in e){let t=`Data returned from action inside ${r} is not serializable: ${e.message}`;throw""!==e.path&&(t+=` (data.${e.path})`),new Error(t)}throw e}}async function ve(e,t){for(const r in e)if("function"==typeof e[r]?.then)return Object.fromEntries(await Promise.all(Object.entries(e).map((async([e,t])=>[e,await t]))));return e}const _e="x-sveltekit-invalidated",be="x-sveltekit-trailing-slash";async function $e({event:e,state:t,node:r,parent:n,track_server_fetches:s}){if(!r?.server)return null;const o={dependencies:new Set,params:new Set,parent:!1,route:!1,url:!1},a=I(e.url,(()=>{o.url=!0}));t.prerendering&&H(a);const i=await(r.server.load?.call(null,{...e,fetch:(t,r)=>{const n=new URL(t instanceof Request?t.url:t,e.url);return s&&o.dependencies.add(n.href),e.fetch(t,r)},depends:(...t)=>{for(const r of t){const{href:t}=new URL(r,e.url);o.dependencies.add(t)}},params:new Proxy(e.params,{get:(e,t)=>(o.params.add(t),e[t])}),parent:async()=>(o.parent=!0,n()),route:new Proxy(e.route,{get:(e,t)=>(o.route=!0,e[t])}),url:a}));return{type:"data",data:i?await ve(i):null,uses:o,slash:r.server.trailingSlash}}async function ke({event:e,fetched:t,node:r,parent:n,server_data_promise:s,state:o,resolve_opts:a,csr:i}){const c=await s;if(!r?.universal?.load)return c?.data??null;const u=await r.universal.load.call(null,{url:e.url,params:e.params,data:c?.data??null,route:e.route,fetch:je(e,o,t,i,a),setHeaders:e.setHeaders,depends:()=>{},parent:n});return u?await ve(u):null}function je(e,t,r,n,s){const o=async(o,a)=>{const i=o instanceof Request&&o.body?o.clone().body:null,c=o instanceof Request&&[...o.headers].length?new Headers(o.headers):a?.headers;let u=await e.fetch(o,a);const l=new URL(o instanceof Request?o.url:o,e.url),f=l.origin===e.url.origin;let p;if(f)t.prerendering&&(p={response:u,body:null},t.prerendering.dependencies.set(l.pathname,p));else{if("no-cors"===(o instanceof Request?o.mode:a?.mode??"cors"))u=new Response("",{status:u.status,statusText:u.statusText,headers:u.headers});else{const t=u.headers.get("access-control-allow-origin");if(!t||t!==e.url.origin&&"*"!==t)throw new Error(`CORS error: ${t?"Incorrect":"No"} 'Access-Control-Allow-Origin' header is present on the requested resource`)}}const d=new Proxy(u,{get(t,n,s){async function u(n,s){const u=Number(t.status);if(isNaN(u))throw new Error(`response.status is not a number. value: "${t.status}" type: ${typeof t.status}`);r.push({url:f?l.href.slice(e.url.origin.length):l.href,method:e.request.method,request_body:o instanceof Request&&i?await Se(i):a?.body,request_headers:c,response_body:n,response:t,is_b64:s})}if("arrayBuffer"===n)return async()=>{const e=await t.arrayBuffer();return p&&(p.body=new Uint8Array(e)),e instanceof ArrayBuffer&&await u(function(e){if(globalThis.Buffer)return Buffer.from(e).toString("base64");const t=new Uint8Array(new Uint16Array([1]).buffer)[0]>0;return btoa(new TextDecoder(t?"utf-16le":"utf-16be").decode(new Uint16Array(new Uint8Array(e))))}(e),!0),e};async function d(){const e=await t.text();return e&&"string"!=typeof e||await u(e,!1),p&&(p.body=e),e}return"text"===n?d:"json"===n?async()=>JSON.parse(await d()):Reflect.get(t,n,t)}});if(n){const t=u.headers.get;u.headers.get=r=>{const n=r.toLowerCase(),o=t.call(u.headers,n);if(o&&!n.startsWith("x-sveltekit-")){if(!s.filterSerializedResponseHeaders(n,o))throw new Error(`Failed to get response header "${n}" â€” it must be included by the \`filterSerializedResponseHeaders\` option: https://kit.svelte.dev/docs/hooks#server-hooks-handle (at ${e.route.id})`)}return o}}return d};return(e,t)=>{const r=o(e,t);return r.catch((()=>{})),r}}async function Se(e){let t="";const r=e.getReader(),n=new TextDecoder;for(;;){const{done:e,value:s}=await r.read();if(e)break;t+=n.decode(s)}return t}function xe(...e){let t=5381;for(const r of e)if("string"==typeof r){let e=r.length;for(;e;)t=33*t^r.charCodeAt(--e)}else{if(!ArrayBuffer.isView(r))throw new TypeError("value must be a string or TypedArray");{const e=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);let n=e.length;for(;n;)t=33*t^e[--n]}}return(t>>>0).toString(36)}const Oe={"&":"&amp;",'"':"&quot;"},Ee=new RegExp(`[${Object.keys(Oe).join("")}]|[\\ud800-\\udbff](?![\\udc00-\\udfff])|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\udc00-\\udfff]`,"g");function Re(e){return`"${e.replace(Ee,(e=>2===e.length?e:Oe[e]??`&#${e.charCodeAt(0)};`))}"`}const Ae={"<":"\\u003C","\u2028":"\\u2028","\u2029":"\\u2029"},Te=new RegExp(`[${Object.keys(Ae).join("")}]`,"g");const Pe=JSON.stringify,qe=new TextEncoder;function Ce(e){Ue[0]||function(){function e(e){return 4294967296*(e-Math.floor(e))}let t=2;for(let r=0;r<64;t++){let n=!0;for(let e=2;e*e<=t;e++)if(t%e==0){n=!1;break}n&&(r<8&&(Ne[r]=e(t**.5)),Ue[r]=e(t**(1/3)),r++)}}();const t=Ne.slice(0),r=function(e){const t=qe.encode(e),r=8*t.length,n=512*Math.ceil((r+65)/512),s=new Uint8Array(n/8);s.set(t),s[t.length]=128,Ie(s);const o=new Uint32Array(s.buffer);return o[o.length-2]=Math.floor(r/4294967296),o[o.length-1]=r,o}(e);for(let s=0;s<r.length;s+=16){const e=r.subarray(s,s+16);let n,o,a,i=t[0],c=t[1],u=t[2],l=t[3],f=t[4],p=t[5],d=t[6],h=t[7];for(let t=0;t<64;t++)t<16?n=e[t]:(o=e[t+1&15],a=e[t+14&15],n=e[15&t]=(o>>>7^o>>>18^o>>>3^o<<25^o<<14)+(a>>>17^a>>>19^a>>>10^a<<15^a<<13)+e[15&t]+e[t+9&15]|0),n=n+h+(f>>>6^f>>>11^f>>>25^f<<26^f<<21^f<<7)+(d^f&(p^d))+Ue[t],h=d,d=p,p=f,f=l+n|0,l=u,u=c,c=i,i=n+(c&u^l&(c^u))+(c>>>2^c>>>13^c>>>22^c<<30^c<<19^c<<10)|0;t[0]=t[0]+i|0,t[1]=t[1]+c|0,t[2]=t[2]+u|0,t[3]=t[3]+l|0,t[4]=t[4]+f|0,t[5]=t[5]+p|0,t[6]=t[6]+d|0,t[7]=t[7]+h|0}const n=new Uint8Array(t.buffer);return Ie(n),De(n)}const Ne=new Uint32Array(8),Ue=new Uint32Array(64);function Ie(e){for(let t=0;t<e.length;t+=4){const r=e[t+0],n=e[t+1],s=e[t+2];e[t+0]=e[t+3],e[t+1]=s,e[t+2]=n,e[t+3]=r}}const He="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");function De(e){const t=e.length;let r,n="";for(r=2;r<t;r+=3)n+=He[e[r-2]>>2],n+=He[(3&e[r-2])<<4|e[r-1]>>4],n+=He[(15&e[r-1])<<2|e[r]>>6],n+=He[63&e[r]];return r===t+1&&(n+=He[e[r-2]>>2],n+=He[(3&e[r-2])<<4],n+="=="),r===t&&(n+=He[e[r-2]>>2],n+=He[(3&e[r-2])<<4|e[r-1]>>4],n+=He[(15&e[r-1])<<2],n+="="),n}const ze=new Uint8Array(16);const Le=new Set(["self","unsafe-eval","unsafe-hashes","unsafe-inline","none","strict-dynamic","report-sample","wasm-unsafe-eval","script"]),We=/^(nonce|sha\d\d\d)-/;class Me{#e;#t;#r;#n;#s;#o;#a;constructor(e,t,r){this.#e=e,this.#n=t;const n=this.#n;this.#s=[],this.#o=[];const s=n["script-src"]||n["default-src"],o=n["style-src"]||n["default-src"];this.#t=!!s&&s.filter((e=>"unsafe-inline"!==e)).length>0,this.#r=!!o&&o.filter((e=>"unsafe-inline"!==e)).length>0,this.script_needs_nonce=this.#t&&!this.#e,this.style_needs_nonce=this.#r&&!this.#e,this.#a=r}add_script(e){this.#t&&(this.#e?this.#s.push(`sha256-${Ce(e)}`):0===this.#s.length&&this.#s.push(`nonce-${this.#a}`))}add_style(e){this.#r&&(this.#e?this.#o.push(`sha256-${Ce(e)}`):0===this.#o.length&&this.#o.push(`nonce-${this.#a}`))}get_header(e=!1){const t=[],r={...this.#n};this.#o.length>0&&(r["style-src"]=[...r["style-src"]||r["default-src"]||[],...this.#o]),this.#s.length>0&&(r["script-src"]=[...r["script-src"]||r["default-src"]||[],...this.#s]);for(const n in r){if(e&&("frame-ancestors"===n||"report-uri"===n||"sandbox"===n))continue;const s=r[n];if(!s)continue;const o=[n];Array.isArray(s)&&s.forEach((e=>{Le.has(e)||We.test(e)?o.push(`'${e}'`):o.push(e)})),t.push(o.join(" "))}return t.join("; ")}}class Je extends Me{get_meta(){const e=this.get_header(!0);if(e)return`<meta http-equiv="content-security-policy" content=${Re(e)}>`}}class Be extends Me{constructor(e,t,r){if(super(e,t,r),Object.values(t).filter((e=>!!e)).length>0){if(!(t["report-to"]?.length??!1)&&!(t["report-uri"]?.length??!1))throw Error("`content-security-policy-report-only` must be specified with either the `report-to` or `report-uri` directives, or both")}}}class Ge{nonce=function(){return crypto.getRandomValues(ze),De(ze)}();csp_provider;report_only_provider;constructor({mode:e,directives:t,reportOnly:r},{prerender:n}){const s="hash"===e||"auto"===e&&n;this.csp_provider=new Je(s,t,this.nonce),this.report_only_provider=new Be(s,r,this.nonce)}get script_needs_nonce(){return this.csp_provider.script_needs_nonce||this.report_only_provider.script_needs_nonce}get style_needs_nonce(){return this.csp_provider.style_needs_nonce||this.report_only_provider.style_needs_nonce}add_script(e){this.csp_provider.add_script(e),this.report_only_provider.add_script(e)}add_style(e){this.csp_provider.add_style(e),this.report_only_provider.add_style(e)}}function Fe(){let e,t;return{promise:new Promise(((r,n)=>{e=r,t=n})),fulfil:e,reject:t}}function Ve(){const e=[Fe()];return{iterator:{[Symbol.asyncIterator]:()=>({next:async()=>{const t=await e[0].promise;return t.done||e.shift(),t}})},push:t=>{e[e.length-1].fulfil({value:t,done:!1}),e.push(Fe())},done:()=>{e[e.length-1].fulfil({done:!0})}}}const Ze={...y(!1),check:()=>!1},Ke=new TextEncoder;async function Qe({branch:s,fetched:o,options:a,manifest:i,state:u,page_config:l,status:f,error:p=null,event:d,resolve_opts:h,action_result:y}){if(u.prerendering){if("nonce"===a.csp.mode)throw new Error('Cannot use prerendering if config.kit.csp.mode === "nonce"');if(a.app_template_contains_nonce)throw new Error("Cannot use prerendering if page template contains %sveltekit.nonce%")}const{client:w}=i._,v=new Set(w.imports),_=new Set(w.stylesheets),b=new Set(w.fonts),$=new Set,k=new Map;let j;const S="success"===y?.type||"failure"===y?.type?y.data??null:null;let x=e,E=t,T=Pe(e);if(!u.prerendering?.fallback){x=d.url.pathname.slice(e.length).split("/").slice(2).map((()=>"..")).join("/")||".",T=`new URL(${Pe(x)}, location).pathname.slice(0, -1)`,(!t||"/"===t[0]&&t!==m)&&(E=x)}if(l.ssr){const e={stores:{page:g(null),navigating:g(null),updated:Ze},constructors:await Promise.all(s.map((({node:e})=>e.component()))),form:S};let t={};for(let r=0;r<s.length;r+=1)t={...t,...s[r].data},e[`data_${r}`]=t;e.page={error:p,params:d.params,route:d.route,status:f,url:d.url,data:t,form:S};try{j=a.root.render(e)}finally{r()}for(const{node:r}of s){for(const e of r.imports)v.add(e);for(const e of r.stylesheets)_.add(e);for(const e of r.fonts)b.add(e);r.inline_styles&&Object.entries(await r.inline_styles()).forEach((([e,t])=>k.set(e,t)))}}else j={head:"",html:"",css:{code:"",map:null}};let P="",q=j.html;const C=new Ge(a.csp,{prerender:!!u.prerendering}),N=t=>t.startsWith("/")?e+t:`${E}/${t}`;if(k.size>0){const e=Array.from(k.values()).join("\n"),t=[];C.style_needs_nonce&&t.push(` nonce="${C.nonce}"`),C.add_style(e),P+=`\n\t<style${t.join("")}>${e}</style>`}for(const e of _){const t=N(e),r=['rel="stylesheet"'];if(k.has(e))r.push("disabled",'media="(max-width: 0)"');else if(h.preload({type:"css",path:t})){const e=['rel="preload"','as="style"'];$.add(`<${encodeURI(t)}>; ${e.join(";")}; nopush`)}P+=`\n\t\t<link href="${t}" ${r.join(" ")}>`}for(const e of b){const t=N(e);if(h.preload({type:"font",path:t})){P+=`\n\t\t<link ${['rel="preload"','as="font"',`type="font/${e.slice(e.lastIndexOf(".")+1)}"`,`href="${t}"`,"crossorigin"].join(" ")}>`}}const U=`__sveltekit_${a.version_hash}`,{data:I,chunks:H}=function(e,t,r,n){let s=1,o=0;const{iterator:a,push:i,done:c}=Ve();function u(r){if("function"==typeof r?.then){const a=s++;return o+=1,r.then((e=>({data:e}))).catch((async r=>({error:await O(e,t,r)}))).then((async({data:r,error:s})=>{let l;o-=1;try{l=Y({id:a,data:r,error:s},u)}catch(f){s=await O(e,t,new Error(`Failed to serialize promise while rendering ${e.route.id}`)),l=Y({id:a,data:r=void 0,error:s},u)}i(`<script>${n}.resolve(${l})<\/script>\n`),0===o&&c()})),`${n}.defer(${a})`}}try{return{data:`[${r.map((e=>e?`{"type":"data","data":${Y(e.data,u)},${A(e)}${e.slash?`,"slash":${JSON.stringify(e.slash)}`:""}}`:"null")).join(",")}]`,chunks:o>0?a:null}}catch(l){throw new Error(R(e,l))}}(d,a,s.map((e=>e.server_data)),U);if(l.ssr&&l.csr&&(q+=`\n\t\t\t${o.map((e=>function(e,t,r=!1){const n={};let s=null,o=null,a=!1;for(const[u,l]of e.response.headers)t(u,l)&&(n[u]=l),"cache-control"===u?s=l:"age"===u?o=l:"vary"===u&&"*"===l.trim()&&(a=!0);const i=JSON.stringify({status:e.response.status,statusText:e.response.statusText,headers:n,body:e.response_body}).replace(Te,(e=>Ae[e])),c=['type="application/json"',"data-sveltekit-fetched",`data-url=${Re(e.url)}`];if(e.is_b64&&c.push("data-b64"),e.request_headers||e.request_body){const t=[];e.request_headers&&t.push([...new Headers(e.request_headers)].join(",")),e.request_body&&t.push(e.request_body),c.push(`data-hash="${xe(...t)}"`)}if(!r&&"GET"===e.method&&s&&!a){const e=/s-maxage=(\d+)/g.exec(s)??/max-age=(\d+)/g.exec(s);e&&c.push(`data-ttl="${+e[1]-+(o??"0")}"`)}return`<script ${c.join(" ")}>${i}<\/script>`}(e,h.filterSerializedResponseHeaders,!!u.prerendering))).join("\n\t\t\t")}`),l.csr){const e=Array.from(v,(e=>N(e))).filter((e=>h.preload({type:"js",path:e})));for(const t of e)$.add(`<${encodeURI(t)}>; rel="modulepreload"; nopush`),"modulepreload"!==a.preload_strategy?P+=`\n\t\t<link rel="preload" as="script" crossorigin="anonymous" href="${t}">`:u.prerendering&&(P+=`\n\t\t<link rel="modulepreload" href="${t}">`);const r=[],o=[t&&`assets: ${Pe(t)}`,`base: ${T}`,`env: ${Pe(n)}`].filter(Boolean);H&&(r.push("const deferred = new Map();"),o.push("defer: (id) => new Promise((fulfil, reject) => {\n\t\t\t\t\t\t\tdeferred.set(id, { fulfil, reject });\n\t\t\t\t\t\t})"),o.push("resolve: ({ id, data, error }) => {\n\t\t\t\t\t\t\tconst { fulfil, reject } = deferred.get(id);\n\t\t\t\t\t\t\tdeferred.delete(id);\n\n\t\t\t\t\t\t\tif (error) reject(error);\n\t\t\t\t\t\t\telse fulfil(data);\n\t\t\t\t\t\t}")),r.push(`${U} = {\n\t\t\t\t\t\t${o.join(",\n\t\t\t\t\t\t")}\n\t\t\t\t\t};`);const i=["app","element"];if(r.push("const element = document.currentScript.parentElement;"),l.ssr){const e={form:"null",error:"null"};r.push(`const data = ${I};`),S&&(e.form=function(e,t){return we(e,Y,t)}(S,d.route.id)),p&&(e.error=Y(p));const t=[`node_ids: [${s.map((({node:e})=>e.index)).join(", ")}]`,"data",`form: ${e.form}`,`error: ${e.error}`];200!==f&&t.push(`status: ${f}`),a.embedded&&t.push(`params: ${Y(d.params)}`,`route: ${Pe(d.route)}`),i.push(`{\n\t\t\t\t\t\t\t${t.join(",\n\t\t\t\t\t\t\t")}\n\t\t\t\t\t\t}`)}if(r.push(`Promise.all([\n\t\t\t\t\t\timport(${Pe(N(w.start))}),\n\t\t\t\t\t\timport(${Pe(N(w.app))})\n\t\t\t\t\t]).then(([kit, app]) => {\n\t\t\t\t\t\tkit.start(${i.join(", ")});\n\t\t\t\t\t});`),a.service_worker){const e="";r.push(`if ('serviceWorker' in navigator) {\n\t\t\t\t\t\taddEventListener('load', function () {\n\t\t\t\t\t\t\tnavigator.serviceWorker.register('${N("service-worker.js")}'${e});\n\t\t\t\t\t\t});\n\t\t\t\t\t}`)}const c=`\n\t\t\t\t{\n\t\t\t\t\t${r.join("\n\n\t\t\t\t\t")}\n\t\t\t\t}\n\t\t\t`;C.add_script(c),q+=`\n\t\t\t<script${C.script_needs_nonce?` nonce="${C.nonce}"`:""}>${c}<\/script>\n\t\t`}const D=new Headers({"x-sveltekit-page":"true","content-type":"text/html"});if(u.prerendering){const e=[],t=C.csp_provider.get_meta();t&&e.push(t),u.prerendering.cache&&e.push(`<meta http-equiv="cache-control" content="${u.prerendering.cache}">`),e.length>0&&(P=e.join("\n")+P)}else{const e=C.csp_provider.get_header();e&&D.set("content-security-policy",e);const t=C.report_only_provider.get_header();t&&D.set("content-security-policy-report-only",t),$.size&&D.set("link",Array.from($).join(", "))}P+=j.head;const z=a.templates.app({head:P,body:q,assets:E,nonce:C.nonce,env:n}),L=await h.transformPageChunk({html:z,done:!0})||"";return H||D.set("etag",`"${xe(L)}"`),H?new Response(new ReadableStream({async start(e){e.enqueue(Ke.encode(L+"\n"));for await(const t of H)e.enqueue(Ke.encode(t));e.close()},type:"bytes"}),{headers:{"content-type":"text/html"}}):c(L,{status:f,headers:D})}function Xe(e,t){return e.reduce(((e,r)=>r?.universal?.[t]??r?.server?.[t]??e),void 0)}async function Ye({event:e,options:t,manifest:r,state:n,status:s,error:o,resolve_opts:a}){if(e.request.headers.get("x-sveltekit-error"))return S(t,s,o.message);const i=[];try{const c=[],u=await r._.nodes[0](),l=Xe([u],"ssr")??!0,f=Xe([u],"csr")??!0;if(l){n.error=!0;const s=$e({event:e,state:n,node:u,parent:async()=>({}),track_server_fetches:t.track_server_fetches}),o=await s,l=await ke({event:e,fetched:i,node:u,parent:async()=>({}),resolve_opts:a,server_data_promise:s,state:n,csr:f});c.push({node:u,server_data:o,data:l},{node:await r._.nodes[1](),data:null,server_data:null})}return await Qe({options:t,manifest:r,state:n,page_config:{ssr:l,csr:Xe([u],"csr")??!0},status:s,error:await O(e,t,o),branch:c,fetched:i,event:e,resolve_opts:a})}catch(c){return c instanceof p?E(c.status,c.location):S(t,c instanceof u?c.status:500,(await O(e,t,c)).message)}}const et=new TextEncoder;function tt(e,t=200){return c("string"==typeof e?e:JSON.stringify(e),{status:t,headers:{"content-type":"application/json","cache-control":"private, no-store"}})}function rt(e){return tt({type:"redirect",location:e.location})}function nt(e,t,r){let n=1,s=0;const{iterator:o,push:a,done:i}=Ve(),c={Promise:r=>{if("function"==typeof r?.then){const o=n++;s+=1;let u="data";return r.catch((async r=>(u="error",O(e,t,r)))).then((async r=>{let n;try{n=ue(r,c)}catch(l){const r=await O(e,t,new Error(`Failed to serialize promise while rendering ${e.route.id}`));u="error",n=ue(r,c)}s-=1,a(`{"type":"chunk","id":${o},"${u}":${n}}\n`),0===s&&i()})),o}}};try{return{data:`{"type":"data","nodes":[${r.map((e=>e?"error"===e.type||"skip"===e.type?JSON.stringify(e):`{"type":"data","data":${ue(e.data,c)},${A(e)}${e.slash?`,"slash":${JSON.stringify(e.slash)}`:""}}`:"null")).join(",")}]}\n`,chunks:s>0?o:null}}catch(u){throw new Error(R(e,u))}}const st=10;async function ot(e,t,r,n,s,o){if(s.depth>st)return c(`Not found: ${e.url.pathname}`,{status:404});if(fe(e)){const s=await n._.nodes[t.leaf]();return async function(e,t,r){const n=r?.actions;if(!n){const r=d(405,"POST method not allowed. No actions exist for this page");return he({type:"error",error:await O(e,t,r)},{status:r.status,headers:{allow:"GET"}})}ge(n);try{const t=await ye(e,n);return he(t instanceof h?{type:"failure",status:t.status,data:me(t.data,e.route.id)}:{type:"success",status:t?200:204,data:me(t,e.route.id)})}catch(s){const r=s;return r instanceof p?de(r):he({type:"error",error:await O(e,t,pe(r))},{status:r instanceof u?r.status:500})}}(e,r,s?.server)}try{const i=await Promise.all([...t.layouts.map((e=>null==e?e:n._.nodes[e]())),n._.nodes[t.leaf]()]),l=i.at(-1);let f,g=200;if(function(e){return"POST"===e.request.method}(e)){if(f=await async function(e,t){const r=t?.actions;if(!r)return e.setHeaders({allow:"GET"}),{type:"error",error:d(405,"POST method not allowed. No actions exist for this page")};ge(r);try{const t=await ye(e,r);return t instanceof h?{type:"failure",status:t.status,data:t.data}:{type:"success",status:200,data:t}}catch(n){return n instanceof p?{type:"redirect",status:n.status,location:n.location}:{type:"error",error:pe(n)}}}(e,l.server),"redirect"===f?.type)return E(f.status,f.location);if("error"===f?.type){const e=f.error;g=e instanceof u?e.status:500}"failure"===f?.type&&(g=f.status)}const y=i.some((e=>e?.server)),m=e.url.pathname.replace(/\/$/,"")+z,w=Xe(i,"prerender")??!1;if(w){const e=l.server;if(e?.actions)throw new Error("Cannot prerender pages with actions")}else if(s.prerendering)return new Response(void 0,{status:204});s.prerender_default=w;const v=[];if(!1===Xe(i,"ssr")&&!s.prerendering)return await Qe({branch:[],fetched:v,page_config:{ssr:!1,csr:Xe(i,"csr")??!0},status:g,error:null,event:e,options:r,manifest:n,state:s,resolve_opts:o});const _=[];let b=null;const $=i.map(((t,n)=>{if(b)throw b;return Promise.resolve().then((async()=>{try{if(t===l&&"error"===f?.type)throw f.error;return await $e({event:e,state:s,node:t,parent:async()=>{const e={};for(let t=0;t<n;t+=1){const r=await $[t];r&&Object.assign(e,await r.data)}return e},track_server_fetches:r.track_server_fetches})}catch(o){throw b=o,b}}))})),k=Xe(i,"csr")??!0,j=i.map(((t,r)=>{if(b)throw b;return Promise.resolve().then((async()=>{try{return await ke({event:e,fetched:v,node:t,parent:async()=>{const e={};for(let t=0;t<r;t+=1)Object.assign(e,await j[t]);return e},resolve_opts:o,server_data_promise:$[r],state:s,csr:k})}catch(n){throw b=n,b}}))}));for(const e of $)e.catch((()=>{}));for(const e of j)e.catch((()=>{}));for(let d=0;d<i.length;d+=1){const l=i[d];if(l)try{const e=await $[d],t=await j[d];_.push({node:l,server_data:e,data:t})}catch(a){const i=a;if(i instanceof p){if(s.prerendering&&y){const e=JSON.stringify({type:"redirect",location:i.location});s.prerendering.dependencies.set(m,{response:c(e),body:e})}return E(i.status,i.location)}const l=i instanceof u?i.status:500,f=await O(e,r,i);for(;d--;)if(t.errors[d]){const a=t.errors[d],i=await n._.nodes[a]();let c=d;for(;!_[c];)c-=1;return await Qe({event:e,options:r,manifest:n,state:s,resolve_opts:o,page_config:{ssr:!0,csr:!0},status:l,error:f,branch:T(_.slice(0,c+1)).concat({node:i,data:null,server_data:null}),fetched:v})}return S(r,l,f.message)}else _.push(null)}if(s.prerendering&&y){let{data:t,chunks:n}=nt(e,r,_.map((e=>e?.server_data)));if(n)for await(const e of n)t+=e;s.prerendering.dependencies.set(m,{response:c(t),body:t})}return await Qe({event:e,options:r,manifest:n,state:s,resolve_opts:o,page_config:{csr:Xe(i,"csr")??!0,ssr:Xe(i,"ssr")??!0},status:g,error:null,branch:T(_),action_result:f,fetched:v})}catch(a){return await Ye({event:e,options:r,manifest:n,state:s,status:500,error:a,resolve_opts:o})}}
/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var at=function(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");var r={},n=(t||{}).decode||lt,s=0;for(;s<e.length;){var o=e.indexOf("=",s);if(-1===o)break;var a=e.indexOf(";",s);if(-1===a)a=e.length;else if(a<o){s=e.lastIndexOf(";",o-1)+1;continue}var i=e.slice(s,o).trim();if(void 0===r[i]){var c=e.slice(o+1,a).trim();34===c.charCodeAt(0)&&(c=c.slice(1,-1)),r[i]=pt(c,n)}s=a+1}return r},it=function(e,t,r){var n=r||{},s=n.encode||ft;if("function"!=typeof s)throw new TypeError("option encode is invalid");if(!ut.test(e))throw new TypeError("argument name is invalid");var o=s(t);if(o&&!ut.test(o))throw new TypeError("argument val is invalid");var a=e+"="+o;if(null!=n.maxAge){var i=n.maxAge-0;if(isNaN(i)||!isFinite(i))throw new TypeError("option maxAge is invalid");a+="; Max-Age="+Math.floor(i)}if(n.domain){if(!ut.test(n.domain))throw new TypeError("option domain is invalid");a+="; Domain="+n.domain}if(n.path){if(!ut.test(n.path))throw new TypeError("option path is invalid");a+="; Path="+n.path}if(n.expires){var c=n.expires;if(!function(e){return"[object Date]"===ct.call(e)||e instanceof Date}(c)||isNaN(c.valueOf()))throw new TypeError("option expires is invalid");a+="; Expires="+c.toUTCString()}n.httpOnly&&(a+="; HttpOnly");n.secure&&(a+="; Secure");if(n.priority){switch("string"==typeof n.priority?n.priority.toLowerCase():n.priority){case"low":a+="; Priority=Low";break;case"medium":a+="; Priority=Medium";break;case"high":a+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(n.sameSite){switch("string"==typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"strict":a+="; SameSite=Strict";break;case"none":a+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return a},ct=Object.prototype.toString,ut=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function lt(e){return-1!==e.indexOf("%")?decodeURIComponent(e):e}function ft(e){return encodeURIComponent(e)}function pt(e,t){try{return t(e)}catch(r){return e}}function dt(e,t,r){const n=e.headers.get("cookie")??"",s=at(n,{decode:e=>e}),o=C(t.pathname,r).split("/").slice(0,-1).join("/")||"/",a={},i={httpOnly:!0,sameSite:"lax",secure:"localhost"!==t.hostname||"http:"!==t.protocol},c={get(e,r){const s=a[e];if(s&&ht(t.hostname,s.options.domain)&&gt(t.pathname,s.options.path))return s.value;const o=r?.decode||decodeURIComponent;return at(n,{decode:o})[e]},getAll(e){const r=e?.decode||decodeURIComponent,s=at(n,{decode:r});for(const n of Object.values(a))ht(t.hostname,n.options.domain)&&gt(t.pathname,n.options.path)&&(s[n.name]=n.value);return Object.entries(s).map((([e,t])=>({name:e,value:t})))},set(e,t,r={}){u(e,t,{...i,...r})},delete(e,t={}){c.set(e,"",{path:o,...t,maxAge:0})},serialize:(e,t,r={})=>it(e,t,{...i,...r})};function u(e,r,n){let s=n.path;n.domain&&n.domain!==t.hostname||(s?"."===s[0]&&(s=function(e,t){if(P.test(t))return t;if("#"===t[0])return e+t;const r=q.exec(e),n=q.exec(t);if(!r)throw new Error(`bad base path: "${e}"`);const s=n?[]:e.slice(r[0].length).split("/"),o=n?t.slice(n[0].length).split("/"):t.split("/");s.pop();for(let a=0;a<o.length;a+=1){const e=o[a];"."!==e&&(".."===e?s.pop():s.push(e))}return`${n&&n[0]||r&&r[0]||""}${s.join("/")}`}(t.pathname,s)):s=o),a[e]={name:e,value:r,options:{...n,path:s}}}return{cookies:c,new_cookies:a,get_cookie_header:function(e,t){const r={...s};for(const n in a){const t=a[n];if(!ht(e.hostname,t.options.domain))continue;if(!gt(e.pathname,t.options.path))continue;const s=t.options.encode||encodeURIComponent;r[t.name]=s(t.value)}if(t){const e=at(t,{decode:e=>e});for(const t in e)r[t]=e[t]}return Object.entries(r).map((([e,t])=>`${e}=${t}`)).join("; ")},set_internal:u}}function ht(e,t){if(!t)return!0;const r="."===t[0]?t.slice(1):t;return e===r||e.endsWith("."+r)}function gt(e,t){if(!t)return!0;const r=t.endsWith("/")?t.slice(0,-1):t;return e===r||e.startsWith(r+"/")}function yt(e,t){for(const r of t){const{name:t,value:n,options:s}=r;e.append("set-cookie",it(t,n,s))}}var mt={exports:{}},wt={decodeValues:!0,map:!1,silent:!1};function vt(e){return"string"==typeof e&&!!e.trim()}function _t(e,t){var r=e.split(";").filter(vt),n=function(e){var t="",r="",n=e.split("=");n.length>1?(t=n.shift(),r=n.join("=")):r=e;return{name:t,value:r}}(r.shift()),s=n.name,o=n.value;t=t?Object.assign({},wt,t):wt;try{o=t.decodeValues?decodeURIComponent(o):o}catch(i){}var a={name:s,value:o};return r.forEach((function(e){var t=e.split("="),r=t.shift().trimLeft().toLowerCase(),n=t.join("=");"expires"===r?a.expires=new Date(n):"max-age"===r?a.maxAge=parseInt(n,10):"secure"===r?a.secure=!0:"httponly"===r?a.httpOnly=!0:"samesite"===r?a.sameSite=n:a[r]=n})),a}function bt(e,t){if(t=t?Object.assign({},wt,t):wt,!e)return t.map?{}:[];if(e.headers)if("function"==typeof e.headers.getSetCookie)e=e.headers.getSetCookie();else if(e.headers["set-cookie"])e=e.headers["set-cookie"];else{var r=e.headers[Object.keys(e.headers).find((function(e){return"set-cookie"===e.toLowerCase()}))];e=r}if(Array.isArray(e)||(e=[e]),(t=t?Object.assign({},wt,t):wt).map){return e.filter(vt).reduce((function(e,r){var n=_t(r,t);return e[n.name]=n,e}),{})}return e.filter(vt).map((function(e){return _t(e,t)}))}mt.exports=bt,mt.exports.parse=bt;var $t=mt.exports.parseString=_t,kt=mt.exports.splitCookiesString=function(e){if(Array.isArray(e))return e;if("string"!=typeof e)return[];var t,r,n,s,o,a=[],i=0;function c(){for(;i<e.length&&/\s/.test(e.charAt(i));)i+=1;return i<e.length}for(;i<e.length;){for(t=i,o=!1;c();)if(","===(r=e.charAt(i))){for(n=i,i+=1,c(),s=i;i<e.length&&"="!==(r=e.charAt(i))&&";"!==r&&","!==r;)i+=1;i<e.length&&"="===e.charAt(i)?(o=!0,i=s,a.push(e.substring(t,n)),t=i):i=n+1}else i+=1;(!o||i>=e.length)&&a.push(e.substring(t,e.length))}return a};function jt({event:r,options:n,manifest:s,state:o,get_cookie_header:a,set_internal:i}){return(c,u)=>{const l=(async(c,u)=>{const l=St(c,u,r.url);let f=(c instanceof Request?c.mode:u?.mode)??"cors",p=(c instanceof Request?c.credentials:u?.credentials)??"same-origin";return n.hooks.handleFetch({event:r,request:l,fetch:async(c,u)=>{const d=St(c,u,r.url),h=new URL(d.url);if(d.headers.has("origin")||d.headers.set("origin",r.url.origin),c!==l&&(f=(c instanceof Request?c.mode:u?.mode)??"cors",p=(c instanceof Request?c.credentials:u?.credentials)??"same-origin"),"GET"!==d.method&&"HEAD"!==d.method||("no-cors"!==f||h.origin===r.url.origin)&&h.origin!==r.url.origin||d.headers.delete("origin"),h.origin!==r.url.origin){if(`.${h.hostname}`.endsWith(`.${r.url.hostname}`)&&"omit"!==p){const e=a(h,d.headers.get("cookie"));e&&d.headers.set("cookie",e)}return fetch(d)}const g=t||e,y=decodeURIComponent(h.pathname),m=(y.startsWith(g)?y.slice(g.length):y).slice(1),w=`${m}/index.html`,v=s.assets.has(m),_=s.assets.has(w);if(v||_){const e=v?m:w;if(o.read){const t=v?s.mimeTypes[m.slice(m.lastIndexOf("."))]:"text/html";return new Response(o.read(e),{headers:t?{"content-type":t}:{}})}return await fetch(d)}if("omit"!==p){const e=a(h,d.headers.get("cookie"));e&&d.headers.set("cookie",e);const t=r.request.headers.get("authorization");t&&!d.headers.has("authorization")&&d.headers.set("authorization",t)}d.headers.has("accept")||d.headers.set("accept","*/*"),d.headers.has("accept-language")||d.headers.set("accept-language",r.request.headers.get("accept-language"));const b=await Ht(d,n,s,{...o,depth:o.depth+1}),$=b.headers.get("set-cookie");if($)for(const e of kt($)){const{name:t,value:r,...n}=$t(e);i(t,r,n)}return b}})})(c,u);return l.catch((()=>{})),l}}function St(e,t,r){return e instanceof Request?e:new Request("string"==typeof e?new URL(e,r):e,t)}function xt(e){return function(t,r){if(t)for(const n in t){if("_"===n[0]||e.has(n))continue;const t=[...e.values()],s=Ot(n,r?.slice(r.lastIndexOf(".")))??`valid exports are ${t.join(", ")}, or anything with a '_' prefix`;throw new Error(`Invalid export '${n}'${r?` in ${r}`:""} (${s})`)}}}function Ot(e,t=".js"){const r=[];if(Et.has(e)&&r.push(`+layout${t}`),Rt.has(e)&&r.push(`+page${t}`),At.has(e)&&r.push(`+layout.server${t}`),Tt.has(e)&&r.push(`+page.server${t}`),Pt.has(e)&&r.push(`+server${t}`),r.length>0)return`'${e}' is a valid export in ${r.slice(0,-1).join(", ")}${r.length>1?" or ":""}${r.at(-1)}`}const Et=new Set(["load","prerender","csr","ssr","trailingSlash","config"]),Rt=new Set([...Et,"entries"]),At=new Set([...Et]),Tt=new Set([...At,"actions","entries"]),Pt=new Set(["GET","POST","PATCH","PUT","DELETE","OPTIONS","HEAD","fallback","prerender","trailingSlash","config","entries"]),qt=(xt(Et),xt(Rt),xt(At),xt(Tt),xt(Pt),({html:e})=>e),Ct=()=>!1,Nt=({type:e})=>"js"===e||"css"===e,Ut=new Set(["GET","HEAD","POST"]),It=new Set(["GET","HEAD","OPTIONS"]);async function Ht(t,r,n,s){const o=new URL(t.url);if(r.csrf_check_origin){if(b(t)&&("POST"===t.method||"PUT"===t.method||"PATCH"===t.method||"DELETE"===t.method)&&t.headers.get("origin")!==o.origin){const e=d(403,`Cross-site ${t.method} form submissions are forbidden`);return"application/json"===t.headers.get("accept")?l(e.body,{status:e.status}):c(e.body.message,{status:e.status})}}let a;try{a=o.pathname.split("%25").map(decodeURI).join("%25")}catch{return c("Malformed URI",{status:400})}let i=null,h={};if(e&&!s.prerendering?.fallback){if(!a.startsWith(e))return c("Not found",{status:404});a=a.slice(e.length)||"/"}const g=function(e){return e.endsWith(z)}(a);let y,m;if(g&&(a=L(a)||"/",o.pathname=L(o.pathname)+("1"===o.searchParams.get(be)?"/":"")||"/",o.searchParams.delete(be),y=o.searchParams.get(_e)?.split("").map((e=>"1"===e)),o.searchParams.delete(_e)),!s.prerendering?.fallback){const e=await n._.matchers();for(const t of n._.routes){const r=t.pattern.exec(a);if(!r)continue;const n=$(r,t.params,e);if(n){i=t,h=N(n);break}}}const j={};let S={};const R={cookies:null,fetch:null,getClientAddress:s.getClientAddress||(()=>{throw new Error("@sveltejs/adapter-vercel does not specify getClientAddress. Please raise an issue")}),locals:{},params:h,platform:s.platform,request:t,route:{id:i?.id??null},setHeaders:e=>{for(const t in e){const r=t.toLowerCase(),n=e[t];if("set-cookie"===r)throw new Error("Use `event.cookies.set(name, value, options)` instead of `event.setHeaders` to set cookies");if(r in j)throw new Error(`"${t}" header is already set`);j[r]=n,s.prerendering&&"cache-control"===r&&(s.prerendering.cache=n)}},url:o,isDataRequest:g,isSubRequest:s.depth>0};let A={transformPageChunk:qt,filterSerializedResponseHeaders:Ct,preload:Nt};try{if(i){if(o.pathname===e||o.pathname===e+"/")m="always";else if(i.page){const e=await Promise.all([...i.page.layouts.map((e=>null==e?e:n._.nodes[e]())),n._.nodes[i.page.leaf]()]);m=Xe(e,"trailingSlash")}else if(i.endpoint){const e=await i.endpoint();m=e.trailingSlash}if(!g){const e=C(o.pathname,m??"never");if(e!==o.pathname&&!s.prerendering?.fallback)return new Response(void 0,{status:308,headers:{"x-sveltekit-normalize":"1",location:(e.startsWith("//")?o.origin+e:e)+("?"===o.search?"":o.search)}})}}const{cookies:a,new_cookies:l,get_cookie_header:d,set_internal:h}=dt(t,o,m??"never");S=l,R.cookies=a,R.fetch=jt({event:R,options:r,manifest:n,state:s,get_cookie_header:d,set_internal:h}),s.prerendering&&!s.prerendering.fallback&&H(o);const b=await r.hooks.handle({event:R,resolve:(e,o)=>async function(e,o){try{if(o){if("ssr"in o)throw new Error("ssr has been removed, set it in the appropriate +layout.js instead. See the PR for more information: https://github.com/sveltejs/kit/pull/6197");A={transformPageChunk:o.transformPageChunk||qt,filterSerializedResponseHeaders:o.filterSerializedResponseHeaders||Ct,preload:o.preload||Nt}}if(s.prerendering?.fallback)return await Qe({event:e,options:r,manifest:n,state:s,page_config:{ssr:!1,csr:!0},status:200,error:null,branch:[],fetched:[],resolve_opts:A});if(i){const o=e.request.method;let a;if(g)a=await async function(e,t,r,n,s,o,a){if(!t.page)return new Response(void 0,{status:404});try{const i=[...t.page.layouts,t.page.leaf],c=o??i.map((()=>!0));let l=!1;const f=new URL(e.url);f.pathname=C(f.pathname,a);const d={...e,url:f},h=i.map(((e,t)=>function(e){let t,r=!1;return()=>r?t:(r=!0,t=e())}((async()=>{try{if(l)return{type:"skip"};const o=null==e?e:await n._.nodes[e]();return $e({event:d,state:s,node:o,parent:async()=>{const e={};for(let r=0;r<t;r+=1){const t=await h[r]();t&&Object.assign(e,t.data)}return e},track_server_fetches:r.track_server_fetches})}catch(o){throw l=!0,o}})))),g=h.map((async(e,t)=>c[t]?e():{type:"skip"}));let y=g.length;const m=await Promise.all(g.map(((t,n)=>t.catch((async t=>{if(t instanceof p)throw t;return y=Math.min(y,n+1),{type:"error",error:await O(e,r,t),status:t instanceof u?t.status:void 0}}))))),{data:w,chunks:v}=nt(e,r,m);return v?new Response(new ReadableStream({async start(e){e.enqueue(et.encode(w));for await(const t of v)e.enqueue(et.encode(t));e.close()},type:"bytes"}),{headers:{"content-type":"text/sveltekit-data","cache-control":"private, no-store"}}):tt(w)}catch(i){const t=i;return t instanceof p?rt(t):tt(await O(e,r,t),500)}}(e,i,r,n,s,y,m??"never");else if(!i.endpoint||i.page&&!function(e){const{method:t,headers:r}=e.request;return!(!w.includes(t)||v.includes(t))||("POST"!==t||"true"!==r.get("x-sveltekit-action"))&&"text/html"!==_(e.request.headers.get("accept")??"*/*",["*","text/html"])}(e)){if(!i.page)throw new Error("This should never happen");if(Ut.has(o))a=await ot(e,i.page,r,n,s,A);else{const e=new Set(It),t=await n._.nodes[i.page.leaf]();if(t?.server?.actions&&e.add("POST"),"OPTIONS"===o)a=new Response(null,{status:204,headers:{allow:Array.from(e.values()).join(", ")}});else{a=k([...e].reduce(((e,t)=>(e[t]=!0,e)),{}),o)}}}else a=await async function(e,t,r){const n=e.request.method;let s=t[n]||t.fallback;if("HEAD"===n&&t.GET&&!t.HEAD&&(s=t.GET),!s)return k(t,n);const o=t.prerender??r.prerender_default;if(o&&(t.POST||t.PATCH||t.PUT||t.DELETE))throw new Error("Cannot prerender endpoints that have mutative methods");if(r.prerendering&&!o){if(r.depth>0)throw new Error(`${e.route.id} is not prerenderable`);return new Response(void 0,{status:204})}try{let t=await s(e);if(!(t instanceof Response))throw new Error(`Invalid response from route ${e.url.pathname}: handler should return a Response object`);return r.prerendering&&(t=new Response(t.body,{status:t.status,statusText:t.statusText,headers:new Headers(t.headers)}),t.headers.set("x-sveltekit-prerender",String(o))),t}catch(a){if(a instanceof p)return new Response(void 0,{status:a.status,headers:{location:a.location}});throw a}}(e,await i.endpoint(),s);if("GET"===t.method&&i.page&&i.endpoint){const e=a.headers.get("vary")?.split(",")?.map((e=>e.trim().toLowerCase()));e?.includes("accept")||e?.includes("*")||(a=new Response(a.body,{status:a.status,statusText:a.statusText,headers:new Headers(a.headers)}),a.headers.append("Vary","Accept"))}return a}return s.error&&e.isSubRequest?await fetch(t,{headers:{"x-sveltekit-error":"true"}}):s.error?c("Internal Server Error",{status:500}):0===s.depth?await Ye({event:e,options:r,manifest:n,state:s,status:404,error:new f(e.url.pathname),resolve_opts:A}):s.prerendering?c("not found",{status:404}):await fetch(t)}catch(a){return await x(e,r,a)}finally{e.cookies.set=()=>{throw new Error("Cannot use `cookies.set(...)` after the response has been generated")},e.setHeaders=()=>{throw new Error("Cannot use `setHeaders(...)` after the response has been generated")}}}(e,o).then((t=>{for(const e in j){t.headers.set(e,j[e])}return yt(t.headers,Object.values(S)),s.prerendering&&null!==e.route.id&&t.headers.set("x-sveltekit-routeid",encodeURI(e.route.id)),t}))});if(200===b.status&&b.headers.has("etag")){let e=t.headers.get("if-none-match");e?.startsWith('W/"')&&(e=e.substring(2));const r=b.headers.get("etag");if(e===r){const e=new Headers({etag:r});for(const t of["cache-control","content-location","date","expires","vary","set-cookie"]){const r=b.headers.get(t);r&&e.set(t,r)}return new Response(void 0,{status:304,headers:e})}}if(g&&b.status>=300&&b.status<=308){const e=b.headers.get("location");if(e)return rt(new p(b.status,e))}return b}catch(T){if(T instanceof p){const e=g?rt(T):i?.page&&fe(R)?de(T):E(T.status,T.location);return yt(e.headers,Object.values(S)),e}return await x(R,r,T)}}class Dt{#i;#c;constructor(e){this.#i=s,this.#c=e}async init({env:e}){if(o(function(e,{public_prefix:t,private_prefix:r}){return Object.fromEntries(Object.entries(e).filter((([e])=>e.startsWith(r)&&(""===t||!e.startsWith(t)))))}(e,{public_prefix:this.#i.env_public_prefix,private_prefix:this.#i.env_private_prefix})),a(function(e,{public_prefix:t,private_prefix:r}){return Object.fromEntries(Object.entries(e).filter((([e])=>e.startsWith(t)&&(""===r||!e.startsWith(r)))))}(e,{public_prefix:this.#i.env_public_prefix,private_prefix:this.#i.env_private_prefix})),!this.#i.hooks)try{const e=await i();this.#i.hooks={handle:e.handle||(({event:e,resolve:t})=>t(e)),handleError:e.handleError||(({})=>{}),handleFetch:e.handleFetch||(({request:e,fetch:t})=>t(e))}}catch(t){throw t}}async respond(e,t){if(!(e instanceof Request))throw new Error("The first argument to server.respond must be a Request object. See https://github.com/sveltejs/kit/pull/3384 for details");return Ht(e,this.#i,this.#c,{...t,error:!1,depth:0})}}export{Dt as Server};
