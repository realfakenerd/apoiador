import{b as e,a as t,o as r,r as n,p as s,s as o,c as a,d as i,e as c,f as u,g as l,h as p}from"./chunks/internal.js";import{t as d,j as h}from"./chunks/index.js";import{m as f,d as y,n as m,a as g,r as w,b as _,h as v,s as b,c as $,v as k,e as j,f as x,g as O,i as S}from"./chunks/exports.js";import{w as E,r as A}from"./chunks/index2.js";const R="/_svelte_kit_assets",T=["GET","POST","PUT","PATCH","DELETE","OPTIONS","HEAD"],P=["GET","POST","HEAD"];function q(e,t){const r=[];let n;e.split(",").forEach(((e,t)=>{const n=/([^/]+)\/([^;]+)(?:;q=([0-9.]+))?/.exec(e);if(n){const[,e,s,o="1"]=n;r.push({type:e,subtype:s,q:+o,i:t})}})),r.sort(((e,t)=>e.q!==t.q?t.q-e.q:"*"===e.subtype!=("*"===t.subtype)?"*"===e.subtype?1:-1:"*"===e.type!=("*"===t.type)?"*"===e.type?1:-1:e.i-t.i));let s=Infinity;for(const o of t){const[e,t]=o.split("/"),a=r.findIndex((r=>!(r.type!==e&&"*"!==r.type||r.subtype!==t&&"*"!==r.subtype)));-1!==a&&a<s&&(n=o,s=a)}return n}function C(e){return function(e,...t){const r=e.headers.get("content-type")?.split(";",1)[0].trim()??"";return t.includes(r.toLowerCase())}(e,"application/x-www-form-urlencoded","multipart/form-data","text/plain")}class N{constructor(e,t){this.status=e,this.body="string"==typeof t?{message:t}:t||{message:`Error: ${e}`}}toString(){return JSON.stringify(this.body)}}class U{constructor(e,t){this.status=e,this.location=t}}class H extends Error{constructor(e,t,r){super(r),this.status=e,this.text=t}}class D{constructor(e,t){this.status=e,this.data=t}}function I(e){return e instanceof N||e instanceof H?e.status:500}function z(e,t){return d(`${t} method not allowed`,{status:405,headers:{allow:L(e).join(", ")}})}function L(e){const t=T.filter((t=>t in e));return("GET"in e||"HEAD"in e)&&t.push("HEAD"),t}function M(e,t,r){let n=e.templates.error({status:t,message:r});return d(n,{headers:{"content-type":"text/html; charset=utf-8"},status:t})}async function W(e,t,r){var n;const s=I(r=r instanceof N?r:(n=r)instanceof Error||n&&n.name&&n.message?n:new Error(JSON.stringify(n))),o=await J(e,t,r),a=q(e.request.headers.get("accept")||"text/html",["application/json","text/html"]);return e.isDataRequest||"application/json"===a?h(o,{status:s}):M(t,s,o.message)}async function J(e,t,r){if(r instanceof N)return r.body;const n=I(r),s=function(e){return e instanceof H?e.text:"Internal Error"}(r);return await t.hooks.handleError({error:r,event:e,status:n,message:s})??{message:s}}function B(e,t){return new Response(void 0,{status:e,headers:{location:t}})}function G(e,t){return t.path?`Data returned from \`load\` while rendering ${e.route.id} is not serializable: ${t.message} (data${t.path})`:""===t.path?`Data returned from \`load\` while rendering ${e.route.id} is not a plain object`:t.message}function F(e){const t=[];return e.uses&&e.uses.dependencies.size>0&&t.push(`"dependencies":${JSON.stringify(Array.from(e.uses.dependencies))}`),e.uses&&e.uses.search_params.size>0&&t.push(`"search_params":${JSON.stringify(Array.from(e.uses.search_params))}`),e.uses&&e.uses.params.size>0&&t.push(`"params":${JSON.stringify(Array.from(e.uses.params))}`),e.uses?.parent&&t.push('"parent":1'),e.uses?.route&&t.push('"route":1'),e.uses?.url&&t.push('"url":1'),`"uses":{${t.join(",")}}`}function V(e){return e.filter((e=>null!=e))}const Z={"<":"\\u003C","\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\u2028":"\\u2028","\u2029":"\\u2029"};class Y extends Error{constructor(e,t){super(e),this.name="DevalueError",this.path=t.join("")}}function K(e){return Object(e)!==e}const Q=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function X(e){const t=Object.getPrototypeOf(e);return t===Object.prototype||null===t||Object.getOwnPropertyNames(t).sort().join("\0")===Q}function ee(e){return Object.prototype.toString.call(e).slice(8,-1)}function te(e){switch(e){case'"':return'\\"';case"<":return"\\u003C";case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r";case"\t":return"\\t";case"\b":return"\\b";case"\f":return"\\f";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return e<" "?`\\u${e.charCodeAt(0).toString(16).padStart(4,"0")}`:""}}function re(e){let t="",r=0;const n=e.length;for(let s=0;s<n;s+=1){const n=te(e[s]);n&&(t+=e.slice(r,s)+n,r=s+1)}return`"${0===r?e:t+e.slice(r)}"`}const ne="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_$",se=/[<\b\f\n\r\t\0\u2028\u2029]/g,oe=/^(?:do|if|in|for|int|let|new|try|var|byte|case|char|else|enum|goto|long|this|void|with|await|break|catch|class|const|final|float|short|super|throw|while|yield|delete|double|export|import|native|return|switch|throws|typeof|boolean|default|extends|finally|package|private|abstract|continue|debugger|function|volatile|interface|protected|transient|implements|instanceof|synchronized)$/;function ae(e,t){const r=new Map,n=[],s=new Map;!function e(o){if("function"==typeof o)throw new Y("Cannot stringify a function",n);if(!K(o)){if(r.has(o))return void r.set(o,r.get(o)+1);if(r.set(o,1),t){const e=t(o);if("string"==typeof e)return void s.set(o,e)}switch(ee(o)){case"Number":case"BigInt":case"String":case"Boolean":case"Date":case"RegExp":return;case"Array":o.forEach(((t,r)=>{n.push(`[${r}]`),e(t),n.pop()}));break;case"Set":Array.from(o).forEach(e);break;case"Map":for(const[t,r]of o)n.push(`.get(${K(t)?ue(t):"..."})`),e(r),n.pop();break;default:if(!X(o))throw new Y("Cannot stringify arbitrary non-POJOs",n);if(Object.getOwnPropertySymbols(o).length>0)throw new Y("Cannot stringify POJOs with symbolic keys",n);for(const t in o)n.push(`.${t}`),e(o[t]),n.pop()}}}(e);const o=new Map;function a(e){if(o.has(e))return o.get(e);if(K(e))return ue(e);if(s.has(e))return s.get(e);const t=ee(e);switch(t){case"Number":case"String":case"Boolean":return`Object(${a(e.valueOf())})`;case"RegExp":return`new RegExp(${re(e.source)}, "${e.flags}")`;case"Date":return`new Date(${e.getTime()})`;case"Array":const r=e.map(((t,r)=>r in e?a(t):"")),n=0===e.length||e.length-1 in e?"":",";return`[${r.join(",")}${n}]`;case"Set":case"Map":return`new ${t}([${Array.from(e).map(a).join(",")}])`;default:const s=`{${Object.keys(e).map((t=>`${function(e){return/^[_$a-zA-Z][_$a-zA-Z0-9]*$/.test(e)?e:ce(JSON.stringify(e))}(t)}:${a(e[t])}`)).join(",")}}`;return null===Object.getPrototypeOf(e)?Object.keys(e).length>0?`Object.assign(Object.create(null),${s})`:"Object.create(null)":s}}Array.from(r).filter((e=>e[1]>1)).sort(((e,t)=>t[1]-e[1])).forEach(((e,t)=>{o.set(e[0],function(e){let t="";do{t=ne[e%ne.length]+t,e=~~(e/ne.length)-1}while(e>=0);return oe.test(t)?`${t}0`:t}(t))}));const i=a(e);if(o.size){const e=[],t=[],r=[];return o.forEach(((n,o)=>{if(e.push(n),s.has(o))return void r.push(s.get(o));if(K(o))return void r.push(ue(o));switch(ee(o)){case"Number":case"String":case"Boolean":r.push(`Object(${a(o.valueOf())})`);break;case"RegExp":r.push(o.toString());break;case"Date":r.push(`new Date(${o.getTime()})`);break;case"Array":r.push(`Array(${o.length})`),o.forEach(((e,r)=>{t.push(`${n}[${r}]=${a(e)}`)}));break;case"Set":r.push("new Set"),t.push(`${n}.${Array.from(o).map((e=>`add(${a(e)})`)).join(".")}`);break;case"Map":r.push("new Map"),t.push(`${n}.${Array.from(o).map((([e,t])=>`set(${a(e)}, ${a(t)})`)).join(".")}`);break;default:r.push(null===Object.getPrototypeOf(o)?"Object.create(null)":"{}"),Object.keys(o).forEach((e=>{t.push(`${n}${function(e){return/^[_$a-zA-Z][_$a-zA-Z0-9]*$/.test(e)?`.${e}`:`[${ce(JSON.stringify(e))}]`}(e)}=${a(o[e])}`)}))}})),t.push(`return ${i}`),`(function(${e.join(",")}){${t.join(";")}}(${r.join(",")}))`}return i}function ie(e){return Z[e]||e}function ce(e){return e.replace(se,ie)}function ue(e){if("string"==typeof e)return re(e);if(void 0===e)return"void 0";if(0===e&&1/e<0)return"-0";const t=String(e);return"number"==typeof e?t.replace(/^(-)?0\./,"$1."):"bigint"==typeof e?e+"n":t}const le=-1,pe=-2,de=-3,he=-4,fe=-5,ye=-6;function me(e,t){const r=[],n=new Map,s=[];for(const c in t)s.push({key:c,fn:t[c]});const o=[];let a=0;const i=function e(t){if("function"==typeof t)throw new Y("Cannot stringify a function",o);if(n.has(t))return n.get(t);if(void 0===t)return le;if(Number.isNaN(t))return de;if(Infinity===t)return he;if(-Infinity===t)return fe;if(0===t&&1/t<0)return ye;const i=a++;n.set(t,i);for(const{key:n,fn:o}of s){const s=o(t);if(s)return r[i]=`["${n}",${e(s)}]`,i}let c="";if(K(t))c=ge(t);else{switch(ee(t)){case"Number":case"String":case"Boolean":c=`["Object",${ge(t)}]`;break;case"BigInt":c=`["BigInt",${t}]`;break;case"Date":c=`["Date","${t.toISOString()}"]`;break;case"RegExp":const{source:r,flags:n}=t;c=n?`["RegExp",${re(r)},"${n}"]`:`["RegExp",${re(r)}]`;break;case"Array":c="[";for(let s=0;s<t.length;s+=1)s>0&&(c+=","),s in t?(o.push(`[${s}]`),c+=e(t[s]),o.pop()):c+=pe;c+="]";break;case"Set":c='["Set"';for(const s of t)c+=`,${e(s)}`;c+="]";break;case"Map":c='["Map"';for(const[s,a]of t)o.push(`.get(${K(s)?ge(s):"..."})`),c+=`,${e(s)},${e(a)}`;c+="]";break;default:if(!X(t))throw new Y("Cannot stringify arbitrary non-POJOs",o);if(Object.getOwnPropertySymbols(t).length>0)throw new Y("Cannot stringify POJOs with symbolic keys",o);if(null===Object.getPrototypeOf(t)){c='["null"';for(const r in t)o.push(`.${r}`),c+=`,${re(r)},${e(t[r])}`,o.pop();c+="]"}else{c="{";let r=!1;for(const n in t)r&&(c+=","),r=!0,o.push(`.${n}`),c+=`${re(n)}:${e(t[n])}`,o.pop();c+="}"}}}return r[i]=c,i}(e);return i<0?`${i}`:`[${r.join(",")}]`}function ge(e){const t=typeof e;return"string"===t?re(e):e instanceof String?re(e.toString()):void 0===e?le.toString():0===e&&1/e<0?ye.toString():"bigint"===t?`["BigInt","${e}"]`:String(e)}function we(e){return"application/json"===q(e.request.headers.get("accept")??"*/*",["application/json","text/html"])&&"POST"===e.request.method}function _e(e){return e instanceof D?new Error('Cannot "throw fail()". Use "return fail()"'):e}function ve(e){return be({type:"redirect",status:e.status,location:e.location})}function be(e,t){return h(e,t)}function $e(e){if(e.default&&Object.keys(e).length>1)throw new Error("When using named actions, the default action cannot be used. See the docs for more info: https://kit.svelte.dev/docs/form-actions#named-actions")}async function ke(e,t){const r=new URL(e.request.url);let n="default";for(const o of r.searchParams)if(o[0].startsWith("/")){if(n=o[0].slice(1),"default"===n)throw new Error('Cannot use reserved action name "default"');break}const s=t[n];if(!s)throw new H(404,"Not Found",`No action with name '${n}' found`);if(!C(e.request))throw new H(415,"Unsupported Media Type",`Form actions expect form-encoded data — received ${e.request.headers.get("content-type")}`);return s(e)}function je(e,t){return xe(e,me,t)}function xe(e,t,r){try{return t(e)}catch(n){const e=n;if("path"in e){let t=`Data returned from action inside ${r} is not serializable: ${e.message}`;throw""!==e.path&&(t+=` (data.${e.path})`),new Error(t)}throw e}}const Oe="x-sveltekit-invalidated",Se="x-sveltekit-trailing-slash";async function Ee({event:e,state:t,node:r,parent:n}){if(!r?.server)return null;let s=!0;const o={dependencies:new Set,params:new Set,parent:!1,route:!1,url:!1,search_params:new Set},a=f(e.url,(()=>{s&&(o.url=!0)}),(e=>{s&&o.search_params.add(e)}));t.prerendering&&y(a);return{type:"data",data:await(r.server.load?.call(null,{...e,fetch:(t,r)=>(new URL(t instanceof Request?t.url:t,e.url),e.fetch(t,r)),depends:(...t)=>{for(const r of t){const{href:t}=new URL(r,e.url);o.dependencies.add(t)}},params:new Proxy(e.params,{get:(e,t)=>(s&&o.params.add(t),e[t])}),parent:async()=>(s&&(o.parent=!0),n()),route:new Proxy(e.route,{get:(e,t)=>(s&&(o.route=!0),e[t])}),url:a,untrack(e){s=!1;try{return e()}finally{s=!0}}}))??null,uses:o,slash:r.server.trailingSlash}}async function Ae({event:e,fetched:t,node:r,parent:n,server_data_promise:s,state:o,resolve_opts:a,csr:i}){const c=await s;if(!r?.universal?.load)return c?.data??null;return await r.universal.load.call(null,{url:e.url,params:e.params,data:c?.data??null,route:e.route,fetch:Re(e,o,t,i,a),setHeaders:e.setHeaders,depends:()=>{},parent:n,untrack:e=>e()})??null}function Re(e,t,r,n,s){const o=async(o,a)=>{const i=o instanceof Request&&o.body?o.clone().body:null,c=o instanceof Request&&[...o.headers].length?new Headers(o.headers):a?.headers;let u=await e.fetch(o,a);const l=new URL(o instanceof Request?o.url:o,e.url),p=l.origin===e.url.origin;let d;if(p)t.prerendering&&(d={response:u,body:null},t.prerendering.dependencies.set(l.pathname,d));else{if("no-cors"===(o instanceof Request?o.mode:a?.mode??"cors"))u=new Response("",{status:u.status,statusText:u.statusText,headers:u.headers});else{const t=u.headers.get("access-control-allow-origin");if(!t||t!==e.url.origin&&"*"!==t)throw new Error(`CORS error: ${t?"Incorrect":"No"} 'Access-Control-Allow-Origin' header is present on the requested resource`)}}const h=new Proxy(u,{get(t,n,s){async function u(n,s){const u=Number(t.status);if(isNaN(u))throw new Error(`response.status is not a number. value: "${t.status}" type: ${typeof t.status}`);r.push({url:p?l.href.slice(e.url.origin.length):l.href,method:e.request.method,request_body:o instanceof Request&&i?await Te(i):a?.body,request_headers:c,response_body:n,response:t,is_b64:s})}if("arrayBuffer"===n)return async()=>{const e=await t.arrayBuffer();return d&&(d.body=new Uint8Array(e)),e instanceof ArrayBuffer&&await u(function(e){if(globalThis.Buffer)return Buffer.from(e).toString("base64");const t=new Uint8Array(new Uint16Array([1]).buffer)[0]>0;return btoa(new TextDecoder(t?"utf-16le":"utf-16be").decode(new Uint16Array(new Uint8Array(e))))}(e),!0),e};async function h(){const e=await t.text();return e&&"string"!=typeof e||await u(e,!1),d&&(d.body=e),e}return"text"===n?h:"json"===n?async()=>JSON.parse(await h()):Reflect.get(t,n,t)}});if(n){const t=u.headers.get;u.headers.get=r=>{const n=r.toLowerCase(),o=t.call(u.headers,n);if(o&&!n.startsWith("x-sveltekit-")){if(!s.filterSerializedResponseHeaders(n,o))throw new Error(`Failed to get response header "${n}" — it must be included by the \`filterSerializedResponseHeaders\` option: https://kit.svelte.dev/docs/hooks#server-hooks-handle (at ${e.route.id})`)}return o}}return h};return(e,t)=>{const r=o(e,t);return r.catch((()=>{})),r}}async function Te(e){let t="";const r=e.getReader(),n=new TextDecoder;for(;;){const{done:e,value:s}=await r.read();if(e)break;t+=n.decode(s)}return t}function Pe(...e){let t=5381;for(const r of e)if("string"==typeof r){let e=r.length;for(;e;)t=33*t^r.charCodeAt(--e)}else{if(!ArrayBuffer.isView(r))throw new TypeError("value must be a string or TypedArray");{const e=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);let n=e.length;for(;n;)t=33*t^e[--n]}}return(t>>>0).toString(36)}const qe={"&":"&amp;",'"':"&quot;"},Ce=new RegExp(`[${Object.keys(qe).join("")}]|[\\ud800-\\udbff](?![\\udc00-\\udfff])|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\udc00-\\udfff]`,"g");function Ne(e){return`"${e.replace(Ce,(e=>2===e.length?e:qe[e]??`&#${e.charCodeAt(0)};`))}"`}const Ue={"<":"\\u003C","\u2028":"\\u2028","\u2029":"\\u2029"},He=new RegExp(`[${Object.keys(Ue).join("")}]`,"g");const De=JSON.stringify,Ie=new TextEncoder;function ze(e){Me[0]||function(){function e(e){return 4294967296*(e-Math.floor(e))}let t=2;for(let r=0;r<64;t++){let n=!0;for(let e=2;e*e<=t;e++)if(t%e==0){n=!1;break}n&&(r<8&&(Le[r]=e(t**.5)),Me[r]=e(t**(1/3)),r++)}}();const t=Le.slice(0),r=function(e){const t=Ie.encode(e),r=8*t.length,n=512*Math.ceil((r+65)/512),s=new Uint8Array(n/8);s.set(t),s[t.length]=128,We(s);const o=new Uint32Array(s.buffer);return o[o.length-2]=Math.floor(r/4294967296),o[o.length-1]=r,o}(e);for(let s=0;s<r.length;s+=16){const e=r.subarray(s,s+16);let n,o,a,i=t[0],c=t[1],u=t[2],l=t[3],p=t[4],d=t[5],h=t[6],f=t[7];for(let t=0;t<64;t++)t<16?n=e[t]:(o=e[t+1&15],a=e[t+14&15],n=e[15&t]=(o>>>7^o>>>18^o>>>3^o<<25^o<<14)+(a>>>17^a>>>19^a>>>10^a<<15^a<<13)+e[15&t]+e[t+9&15]|0),n=n+f+(p>>>6^p>>>11^p>>>25^p<<26^p<<21^p<<7)+(h^p&(d^h))+Me[t],f=h,h=d,d=p,p=l+n|0,l=u,u=c,c=i,i=n+(c&u^l&(c^u))+(c>>>2^c>>>13^c>>>22^c<<30^c<<19^c<<10)|0;t[0]=t[0]+i|0,t[1]=t[1]+c|0,t[2]=t[2]+u|0,t[3]=t[3]+l|0,t[4]=t[4]+p|0,t[5]=t[5]+d|0,t[6]=t[6]+h|0,t[7]=t[7]+f|0}const n=new Uint8Array(t.buffer);return We(n),Be(n)}const Le=new Uint32Array(8),Me=new Uint32Array(64);function We(e){for(let t=0;t<e.length;t+=4){const r=e[t+0],n=e[t+1],s=e[t+2];e[t+0]=e[t+3],e[t+1]=s,e[t+2]=n,e[t+3]=r}}const Je="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");function Be(e){const t=e.length;let r,n="";for(r=2;r<t;r+=3)n+=Je[e[r-2]>>2],n+=Je[(3&e[r-2])<<4|e[r-1]>>4],n+=Je[(15&e[r-1])<<2|e[r]>>6],n+=Je[63&e[r]];return r===t+1&&(n+=Je[e[r-2]>>2],n+=Je[(3&e[r-2])<<4],n+="=="),r===t&&(n+=Je[e[r-2]>>2],n+=Je[(3&e[r-2])<<4|e[r-1]>>4],n+=Je[(15&e[r-1])<<2],n+="="),n}const Ge=new Uint8Array(16);const Fe=new Set(["self","unsafe-eval","unsafe-hashes","unsafe-inline","none","strict-dynamic","report-sample","wasm-unsafe-eval","script"]),Ve=/^(nonce|sha\d\d\d)-/;class Ze{#e;#t;#r;#n;#s;#o;#a;#i;#c;#u;constructor(e,t,r){this.#e=e,this.#n=t;const n=this.#n;this.#s=[],this.#o=[],this.#a=[],this.#i=[],this.#c=[];const s=n["script-src"]||n["default-src"],o=n["script-src-elem"],a=n["style-src"]||n["default-src"],i=n["style-src-attr"],c=n["style-src-elem"];this.#t=!!s&&s.filter((e=>"unsafe-inline"!==e)).length>0||!!o&&o.filter((e=>"unsafe-inline"!==e)).length>0,this.#r=!!a&&a.filter((e=>"unsafe-inline"!==e)).length>0||!!i&&i.filter((e=>"unsafe-inline"!==e)).length>0||!!c&&c.filter((e=>"unsafe-inline"!==e)).length>0,this.script_needs_nonce=this.#t&&!this.#e,this.style_needs_nonce=this.#r&&!this.#e,this.#u=r}add_script(e){if(this.#t){const t=this.#n;if(this.#e){const r=ze(e);this.#s.push(`sha256-${r}`),t["script-src-elem"]?.length&&this.#o.push(`sha256-${r}`)}else 0===this.#s.length&&this.#s.push(`nonce-${this.#u}`),t["script-src-elem"]?.length&&this.#o.push(`nonce-${this.#u}`)}}add_style(e){if(this.#r){const t=this.#n;if(this.#e){const r=ze(e);this.#a.push(`sha256-${r}`),t["style-src-attr"]?.length&&this.#i.push(`sha256-${r}`),t["style-src-elem"]?.length&&this.#c.push(`sha256-${r}`)}else 0===this.#a.length&&this.#a.push(`nonce-${this.#u}`),t["style-src-attr"]?.length&&this.#i.push(`nonce-${this.#u}`),t["style-src-elem"]?.length&&this.#c.push(`nonce-${this.#u}`)}}get_header(e=!1){const t=[],r={...this.#n};this.#a.length>0&&(r["style-src"]=[...r["style-src"]||r["default-src"]||[],...this.#a]),this.#i.length>0&&(r["style-src-attr"]=[...r["style-src-attr"]||[],...this.#i]),this.#c.length>0&&(r["style-src-elem"]=[...r["style-src-elem"]||[],...this.#c]),this.#s.length>0&&(r["script-src"]=[...r["script-src"]||r["default-src"]||[],...this.#s]),this.#o.length>0&&(r["script-src-elem"]=[...r["script-src-elem"]||[],...this.#o]);for(const n in r){if(e&&("frame-ancestors"===n||"report-uri"===n||"sandbox"===n))continue;const s=r[n];if(!s)continue;const o=[n];Array.isArray(s)&&s.forEach((e=>{Fe.has(e)||Ve.test(e)?o.push(`'${e}'`):o.push(e)})),t.push(o.join(" "))}return t.join("; ")}}class Ye extends Ze{get_meta(){const e=this.get_header(!0);if(e)return`<meta http-equiv="content-security-policy" content=${Ne(e)}>`}}class Ke extends Ze{constructor(e,t,r){if(super(e,t,r),Object.values(t).filter((e=>!!e)).length>0){if(!(t["report-to"]?.length??!1)&&!(t["report-uri"]?.length??!1))throw Error("`content-security-policy-report-only` must be specified with either the `report-to` or `report-uri` directives, or both")}}}class Qe{nonce=function(){return crypto.getRandomValues(Ge),Be(Ge)}();csp_provider;report_only_provider;constructor({mode:e,directives:t,reportOnly:r},{prerender:n}){const s="hash"===e||"auto"===e&&n;this.csp_provider=new Ye(s,t,this.nonce),this.report_only_provider=new Ke(s,r,this.nonce)}get script_needs_nonce(){return this.csp_provider.script_needs_nonce||this.report_only_provider.script_needs_nonce}get style_needs_nonce(){return this.csp_provider.style_needs_nonce||this.report_only_provider.style_needs_nonce}add_script(e){this.csp_provider.add_script(e),this.report_only_provider.add_script(e)}add_style(e){this.csp_provider.add_style(e),this.report_only_provider.add_style(e)}}function Xe(){let e,t;return{promise:new Promise(((r,n)=>{e=r,t=n})),fulfil:e,reject:t}}function et(){const e=[Xe()];return{iterator:{[Symbol.asyncIterator]:()=>({next:async()=>{const t=await e[0].promise;return t.done||e.shift(),t}})},push:t=>{e[e.length-1].fulfil({value:t,done:!1}),e.push(Xe())},done:()=>{e[e.length-1].fulfil({done:!0})}}}const tt={...A(!1),check:()=>!1},rt=new TextEncoder;async function nt({branch:a,fetched:i,options:c,manifest:u,state:l,page_config:p,status:h,error:f=null,event:y,resolve_opts:m,action_result:g}){if(l.prerendering){if("nonce"===c.csp.mode)throw new Error('Cannot use prerendering if config.kit.csp.mode === "nonce"');if(c.app_template_contains_nonce)throw new Error("Cannot use prerendering if page template contains %sveltekit.nonce%")}const{client:w}=u._,_=new Set(w.imports),v=new Set(w.stylesheets),b=new Set(w.fonts),$=new Set,k=new Map;let j;const x="success"===g?.type||"failure"===g?.type?g.data??null:null;let O=e,S=t,A=De(e);if(!l.prerendering?.fallback){O=y.url.pathname.slice(e.length).split("/").slice(2).map((()=>"..")).join("/")||".",A=`new URL(${De(O)}, location).pathname.slice(0, -1)`,(!t||"/"===t[0]&&t!==R)&&(S=O)}if(p.ssr){const e={stores:{page:E(null),navigating:E(null),updated:tt},constructors:await Promise.all(a.map((({node:e})=>e.component()))),form:x};let t={};for(let r=0;r<a.length;r+=1)t={...t,...a[r].data},e[`data_${r}`]=t;e.page={error:f,params:y.params,route:y.route,status:h,url:y.url,data:t,form:x,state:{}},r({base:O,assets:S});try{j=c.root.render(e)}finally{n()}for(const{node:r}of a){for(const e of r.imports)_.add(e);for(const e of r.stylesheets)v.add(e);for(const e of r.fonts)b.add(e);r.inline_styles&&Object.entries(await r.inline_styles()).forEach((([e,t])=>k.set(e,t)))}}else j={head:"",html:"",css:{code:"",map:null}};let T="",P=j.html;const q=new Qe(c.csp,{prerender:!!l.prerendering}),C=t=>t.startsWith("/")?e+t:`${S}/${t}`;if(k.size>0){const e=Array.from(k.values()).join("\n"),t=[];q.style_needs_nonce&&t.push(` nonce="${q.nonce}"`),q.add_style(e),T+=`\n\t<style${t.join("")}>${e}</style>`}for(const e of v){const t=C(e),r=['rel="stylesheet"'];if(k.has(e))r.push("disabled",'media="(max-width: 0)"');else if(m.preload({type:"css",path:t})){const e=['rel="preload"','as="style"'];$.add(`<${encodeURI(t)}>; ${e.join(";")}; nopush`)}T+=`\n\t\t<link href="${t}" ${r.join(" ")}>`}for(const e of b){const t=C(e);if(m.preload({type:"font",path:t})){T+=`\n\t\t<link ${['rel="preload"','as="font"',`type="font/${e.slice(e.lastIndexOf(".")+1)}"`,`href="${t}"`,"crossorigin"].join(" ")}>`}}const N=`__sveltekit_${c.version_hash}`,{data:U,chunks:H}=function(e,t,r,n){let s=1,o=0;const{iterator:a,push:i,done:c}=et();function u(r){if("function"==typeof r?.then){const a=s++;return o+=1,r.then((e=>({data:e}))).catch((async r=>({error:await J(e,t,r)}))).then((async({data:r,error:s})=>{let l;o-=1;try{l=ae({id:a,data:r,error:s},u)}catch(p){s=await J(e,t,new Error(`Failed to serialize promise while rendering ${e.route.id}`)),l=ae({id:a,data:r=void 0,error:s},u)}i(`<script>${n}.resolve(${l})<\/script>\n`),0===o&&c()})),`${n}.defer(${a})`}}try{return{data:`[${r.map((e=>e?`{"type":"data","data":${ae(e.data,u)},${F(e)}${e.slash?`,"slash":${JSON.stringify(e.slash)}`:""}}`:"null")).join(",")}]`,chunks:o>0?a:null}}catch(l){throw new Error(G(e,l))}}(y,c,a.map((e=>e.server_data)),N);if(p.ssr&&p.csr&&(P+=`\n\t\t\t${i.map((e=>function(e,t,r=!1){const n={};let s=null,o=null,a=!1;for(const[u,l]of e.response.headers)t(u,l)&&(n[u]=l),"cache-control"===u?s=l:"age"===u?o=l:"vary"===u&&"*"===l.trim()&&(a=!0);const i=JSON.stringify({status:e.response.status,statusText:e.response.statusText,headers:n,body:e.response_body}).replace(He,(e=>Ue[e])),c=['type="application/json"',"data-sveltekit-fetched",`data-url=${Ne(e.url)}`];if(e.is_b64&&c.push("data-b64"),e.request_headers||e.request_body){const t=[];e.request_headers&&t.push([...new Headers(e.request_headers)].join(",")),e.request_body&&t.push(e.request_body),c.push(`data-hash="${Pe(...t)}"`)}if(!r&&"GET"===e.method&&s&&!a){const e=/s-maxage=(\d+)/g.exec(s)??/max-age=(\d+)/g.exec(s);e&&c.push(`data-ttl="${+e[1]-+(o??"0")}"`)}return`<script ${c.join(" ")}>${i}<\/script>`}(e,m.filterSerializedResponseHeaders,!!l.prerendering))).join("\n\t\t\t")}`),p.csr){w.uses_env_dynamic_public&&l.prerendering&&_.add(`${c.app_dir}/env.js`);const e=Array.from(_,(e=>C(e))).filter((e=>m.preload({type:"js",path:e})));for(const t of e)$.add(`<${encodeURI(t)}>; rel="modulepreload"; nopush`),"modulepreload"!==c.preload_strategy?T+=`\n\t\t<link rel="preload" as="script" crossorigin="anonymous" href="${t}">`:l.prerendering&&(T+=`\n\t\t<link rel="modulepreload" href="${t}">`);const r=[],n=[t&&`assets: ${De(t)}`,`base: ${A}`,`env: ${!w.uses_env_dynamic_public||l.prerendering?null:De(s)}`].filter(Boolean);H&&(r.push("const deferred = new Map();"),n.push("defer: (id) => new Promise((fulfil, reject) => {\n\t\t\t\t\t\t\tdeferred.set(id, { fulfil, reject });\n\t\t\t\t\t\t})"),n.push("resolve: ({ id, data, error }) => {\n\t\t\t\t\t\t\tconst { fulfil, reject } = deferred.get(id);\n\t\t\t\t\t\t\tdeferred.delete(id);\n\n\t\t\t\t\t\t\tif (error) reject(error);\n\t\t\t\t\t\t\telse fulfil(data);\n\t\t\t\t\t\t}")),r.push(`${N} = {\n\t\t\t\t\t\t${n.join(",\n\t\t\t\t\t\t")}\n\t\t\t\t\t};`);const o=["app","element"];if(r.push("const element = document.currentScript.parentElement;"),p.ssr){const e={form:"null",error:"null"};r.push(`const data = ${U};`),x&&(e.form=function(e,t){return xe(e,ae,t)}(x,y.route.id)),f&&(e.error=ae(f));const t=[`node_ids: [${a.map((({node:e})=>e.index)).join(", ")}]`,"data",`form: ${e.form}`,`error: ${e.error}`];200!==h&&t.push(`status: ${h}`),c.embedded&&t.push(`params: ${ae(y.params)}`,`route: ${De(y.route)}`),o.push(`{\n\t\t\t\t\t\t\t${t.join(",\n\t\t\t\t\t\t\t")}\n\t\t\t\t\t\t}`)}if(r.push(`Promise.all([\n\t\t\t\t\t\timport(${De(C(w.start))}),\n\t\t\t\t\t\timport(${De(C(w.app))})\n\t\t\t\t\t]).then(([kit, app]) => {\n\t\t\t\t\t\tkit.start(${o.join(", ")});\n\t\t\t\t\t});`),c.service_worker){const e="";r.push(`if ('serviceWorker' in navigator) {\n\t\t\t\t\t\taddEventListener('load', function () {\n\t\t\t\t\t\t\tnavigator.serviceWorker.register('${C("service-worker.js")}'${e});\n\t\t\t\t\t\t});\n\t\t\t\t\t}`)}const i=`\n\t\t\t\t{\n\t\t\t\t\t${r.join("\n\n\t\t\t\t\t")}\n\t\t\t\t}\n\t\t\t`;q.add_script(i),P+=`\n\t\t\t<script${q.script_needs_nonce?` nonce="${q.nonce}"`:""}>${i}<\/script>\n\t\t`}const D=new Headers({"x-sveltekit-page":"true","content-type":"text/html"});if(l.prerendering){const e=[],t=q.csp_provider.get_meta();t&&e.push(t),l.prerendering.cache&&e.push(`<meta http-equiv="cache-control" content="${l.prerendering.cache}">`),e.length>0&&(T=e.join("\n")+T)}else{const e=q.csp_provider.get_header();e&&D.set("content-security-policy",e);const t=q.report_only_provider.get_header();t&&D.set("content-security-policy-report-only",t),$.size&&D.set("link",Array.from($).join(", "))}T+=j.head;const I=c.templates.app({head:T,body:P,assets:S,nonce:q.nonce,env:o}),z=await m.transformPageChunk({html:I,done:!0})||"";return H||D.set("etag",`"${Pe(z)}"`),H?new Response(new ReadableStream({async start(e){e.enqueue(rt.encode(z+"\n"));for await(const t of H)e.enqueue(rt.encode(t));e.close()},type:"bytes"}),{headers:{"content-type":"text/html"}}):d(z,{status:h,headers:D})}function st(e,t){return e.reduce(((e,r)=>r?.universal?.[t]??r?.server?.[t]??e),void 0)}async function ot({event:e,options:t,manifest:r,state:n,status:s,error:o,resolve_opts:a}){if(e.request.headers.get("x-sveltekit-error"))return M(t,s,o.message);const i=[];try{const c=[],u=await r._.nodes[0](),l=st([u],"ssr")??!0,p=st([u],"csr")??!0;if(l){n.error=!0;const t=Ee({event:e,state:n,node:u,parent:async()=>({})}),s=await t,o=await Ae({event:e,fetched:i,node:u,parent:async()=>({}),resolve_opts:a,server_data_promise:t,state:n,csr:p});c.push({node:u,server_data:s,data:o},{node:await r._.nodes[1](),data:null,server_data:null})}return await nt({options:t,manifest:r,state:n,page_config:{ssr:l,csr:p},status:s,error:await J(e,t,o),branch:c,fetched:i,event:e,resolve_opts:a})}catch(c){return c instanceof U?B(c.status,c.location):M(t,I(c),(await J(e,t,c)).message)}}const at=new TextEncoder;function it(e,t=200){return d("string"==typeof e?e:JSON.stringify(e),{status:t,headers:{"content-type":"application/json","cache-control":"private, no-store"}})}function ct(e){return it({type:"redirect",location:e.location})}function ut(e,t,r){let n=1,s=0;const{iterator:o,push:a,done:i}=et(),c={Promise:r=>{if("function"==typeof r?.then){const o=n++;s+=1;let u="data";return r.catch((async r=>(u="error",J(e,t,r)))).then((async r=>{let n;try{n=me(r,c)}catch(l){const r=await J(e,t,new Error(`Failed to serialize promise while rendering ${e.route.id}`));u="error",n=me(r,c)}s-=1,a(`{"type":"chunk","id":${o},"${u}":${n}}\n`),0===s&&i()})),o}}};try{return{data:`{"type":"data","nodes":[${r.map((e=>e?"error"===e.type||"skip"===e.type?JSON.stringify(e):`{"type":"data","data":${me(e.data,c)},${F(e)}${e.slash?`,"slash":${JSON.stringify(e.slash)}`:""}}`:"null")).join(",")}]}\n`,chunks:s>0?o:null}}catch(u){throw new Error(G(e,u))}}const lt=10;async function pt(e,t,r,n,s,o){if(s.depth>lt)return d(`Not found: ${e.url.pathname}`,{status:404});if(we(e)){const s=await n._.nodes[t.leaf]();return async function(e,t,r){const n=r?.actions;if(!n){const r=new H(405,"Method Not Allowed","POST method not allowed. No actions exist for this page");return be({type:"error",error:await J(e,t,r)},{status:r.status,headers:{allow:"GET"}})}$e(n);try{const t=await ke(e,n);return be(t instanceof D?{type:"failure",status:t.status,data:je(t.data,e.route.id)}:{type:"success",status:t?200:204,data:je(t,e.route.id)})}catch(s){const r=s;return r instanceof U?ve(r):be({type:"error",error:await J(e,t,_e(r))},{status:I(r)})}}(e,r,s?.server)}try{const i=await Promise.all([...t.layouts.map((e=>null==e?e:n._.nodes[e]())),n._.nodes[t.leaf]()]),c=i.at(-1);let u,l=200;if(function(e){return"POST"===e.request.method}(e)){if(u=await async function(e,t){const r=t?.actions;if(!r)return e.setHeaders({allow:"GET"}),{type:"error",error:new H(405,"Method Not Allowed","POST method not allowed. No actions exist for this page")};$e(r);try{const t=await ke(e,r);return t instanceof D?{type:"failure",status:t.status,data:t.data}:{type:"success",status:200,data:t}}catch(n){return n instanceof U?{type:"redirect",status:n.status,location:n.location}:{type:"error",error:_e(n)}}}(e,c.server),"redirect"===u?.type)return B(u.status,u.location);"error"===u?.type&&(l=I(u.error)),"failure"===u?.type&&(l=u.status)}const p=i.some((e=>e?.server?.load)),h=g(e.url.pathname),f=st(i,"prerender")??!1;if(f){const e=c.server;if(e?.actions)throw new Error("Cannot prerender pages with actions")}else if(s.prerendering)return new Response(void 0,{status:204});s.prerender_default=f;const y=[];if(!(!1!==st(i,"ssr")||s.prerendering&&p))return await nt({branch:[],fetched:y,page_config:{ssr:!1,csr:st(i,"csr")??!0},status:l,error:null,event:e,options:r,manifest:n,state:s,resolve_opts:o});const m=[];let w=null;const _=i.map(((t,r)=>{if(w)throw w;return Promise.resolve().then((async()=>{try{if(t===c&&"error"===u?.type)throw u.error;return await Ee({event:e,state:s,node:t,parent:async()=>{const e={};for(let t=0;t<r;t+=1){const r=await _[t];r&&Object.assign(e,await r.data)}return e}})}catch(n){throw w=n,w}}))})),v=st(i,"csr")??!0,b=i.map(((t,r)=>{if(w)throw w;return Promise.resolve().then((async()=>{try{return await Ae({event:e,fetched:y,node:t,parent:async()=>{const e={};for(let t=0;t<r;t+=1)Object.assign(e,await b[t]);return e},resolve_opts:o,server_data_promise:_[r],state:s,csr:v})}catch(n){throw w=n,w}}))}));for(const e of _)e.catch((()=>{}));for(const e of b)e.catch((()=>{}));for(let g=0;g<i.length;g+=1){const c=i[g];if(c)try{const e=await _[g],t=await b[g];m.push({node:c,server_data:e,data:t})}catch(a){const i=a;if(i instanceof U){if(s.prerendering&&p){const e=JSON.stringify({type:"redirect",location:i.location});s.prerendering.dependencies.set(h,{response:d(e),body:e})}return B(i.status,i.location)}const c=I(i),u=await J(e,r,i);for(;g--;)if(t.errors[g]){const a=t.errors[g],i=await n._.nodes[a]();let l=g;for(;!m[l];)l-=1;return await nt({event:e,options:r,manifest:n,state:s,resolve_opts:o,page_config:{ssr:!0,csr:!0},status:c,error:u,branch:V(m.slice(0,l+1)).concat({node:i,data:null,server_data:null}),fetched:y})}return M(r,c,u.message)}else m.push(null)}if(s.prerendering&&p){let{data:t,chunks:n}=ut(e,r,m.map((e=>e?.server_data)));if(n)for await(const e of n)t+=e;s.prerendering.dependencies.set(h,{response:d(t),body:t})}const $=st(i,"ssr")??!0;return await nt({event:e,options:r,manifest:n,state:s,resolve_opts:o,page_config:{csr:st(i,"csr")??!0,ssr:$},status:l,error:null,branch:!1===$?[]:V(m),action_result:u,fetched:y})}catch(a){return await ot({event:e,options:r,manifest:n,state:s,status:500,error:a,resolve_opts:o})}}function dt(e,t,r){const n={},s=e.slice(1),o=s.filter((e=>void 0!==e));let a=0;for(let i=0;i<t.length;i+=1){const e=t[i];let c=s[i-a];if(e.chained&&e.rest&&a&&(c=s.slice(i-a,i+1).filter((e=>e)).join("/"),a=0),void 0!==c)if(e.matcher&&!r[e.matcher](c)){if(!e.optional||!e.chained)return;a++}else{n[e.name]=c;const r=t[i+1],u=s[i+1];r&&!r.rest&&r.optional&&u&&e.chained&&(a=0),r||u||Object.keys(n).length!==o.length||(a=0)}else e.rest&&(n[e.name]="")}if(!a)return n}
/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var ht=function(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");var r={},n=(t||{}).decode||gt,s=0;for(;s<e.length;){var o=e.indexOf("=",s);if(-1===o)break;var a=e.indexOf(";",s);if(-1===a)a=e.length;else if(a<o){s=e.lastIndexOf(";",o-1)+1;continue}var i=e.slice(s,o).trim();if(void 0===r[i]){var c=e.slice(o+1,a).trim();34===c.charCodeAt(0)&&(c=c.slice(1,-1)),r[i]=_t(c,n)}s=a+1}return r},ft=function(e,t,r){var n=r||{},s=n.encode||wt;if("function"!=typeof s)throw new TypeError("option encode is invalid");if(!mt.test(e))throw new TypeError("argument name is invalid");var o=s(t);if(o&&!mt.test(o))throw new TypeError("argument val is invalid");var a=e+"="+o;if(null!=n.maxAge){var i=n.maxAge-0;if(isNaN(i)||!isFinite(i))throw new TypeError("option maxAge is invalid");a+="; Max-Age="+Math.floor(i)}if(n.domain){if(!mt.test(n.domain))throw new TypeError("option domain is invalid");a+="; Domain="+n.domain}if(n.path){if(!mt.test(n.path))throw new TypeError("option path is invalid");a+="; Path="+n.path}if(n.expires){var c=n.expires;if(!function(e){return"[object Date]"===yt.call(e)||e instanceof Date}(c)||isNaN(c.valueOf()))throw new TypeError("option expires is invalid");a+="; Expires="+c.toUTCString()}n.httpOnly&&(a+="; HttpOnly");n.secure&&(a+="; Secure");n.partitioned&&(a+="; Partitioned");if(n.priority){switch("string"==typeof n.priority?n.priority.toLowerCase():n.priority){case"low":a+="; Priority=Low";break;case"medium":a+="; Priority=Medium";break;case"high":a+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(n.sameSite){switch("string"==typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"strict":a+="; SameSite=Strict";break;case"none":a+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return a},yt=Object.prototype.toString,mt=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function gt(e){return-1!==e.indexOf("%")?decodeURIComponent(e):e}function wt(e){return encodeURIComponent(e)}function _t(e,t){try{return t(e)}catch(r){return e}}function vt(e){if(void 0===e?.path)throw new Error("You must specify a `path` when setting, deleting or serializing cookies")}function bt(e,t){if(!t)return!0;const r="."===t[0]?t.slice(1):t;return e===r||e.endsWith("."+r)}function $t(e,t){if(!t)return!0;const r=t.endsWith("/")?t.slice(0,-1):t;return e===r||e.startsWith(r+"/")}function kt(e,t){for(const r of t){const{name:t,value:n,options:s}=r;if(e.append("set-cookie",ft(t,n,s)),s.path.endsWith(".html")){const r=g(s.path);e.append("set-cookie",ft(t,n,{...s,path:r}))}}}var jt={exports:{}},xt={decodeValues:!0,map:!1,silent:!1};function Ot(e){return"string"==typeof e&&!!e.trim()}function St(e,t){var r=e.split(";").filter(Ot),n=function(e){var t="",r="",n=e.split("=");n.length>1?(t=n.shift(),r=n.join("=")):r=e;return{name:t,value:r}}(r.shift()),s=n.name,o=n.value;t=t?Object.assign({},xt,t):xt;try{o=t.decodeValues?decodeURIComponent(o):o}catch(i){}var a={name:s,value:o};return r.forEach((function(e){var t=e.split("="),r=t.shift().trimLeft().toLowerCase(),n=t.join("=");"expires"===r?a.expires=new Date(n):"max-age"===r?a.maxAge=parseInt(n,10):"secure"===r?a.secure=!0:"httponly"===r?a.httpOnly=!0:"samesite"===r?a.sameSite=n:a[r]=n})),a}function Et(e,t){if(t=t?Object.assign({},xt,t):xt,!e)return t.map?{}:[];if(e.headers)if("function"==typeof e.headers.getSetCookie)e=e.headers.getSetCookie();else if(e.headers["set-cookie"])e=e.headers["set-cookie"];else{var r=e.headers[Object.keys(e.headers).find((function(e){return"set-cookie"===e.toLowerCase()}))];e=r}if(Array.isArray(e)||(e=[e]),(t=t?Object.assign({},xt,t):xt).map){return e.filter(Ot).reduce((function(e,r){var n=St(r,t);return e[n.name]=n,e}),{})}return e.filter(Ot).map((function(e){return St(e,t)}))}jt.exports=Et,jt.exports.parse=Et;var At=jt.exports.parseString=St,Rt=jt.exports.splitCookiesString=function(e){if(Array.isArray(e))return e;if("string"!=typeof e)return[];var t,r,n,s,o,a=[],i=0;function c(){for(;i<e.length&&/\s/.test(e.charAt(i));)i+=1;return i<e.length}for(;i<e.length;){for(t=i,o=!1;c();)if(","===(r=e.charAt(i))){for(n=i,i+=1,c(),s=i;i<e.length&&"="!==(r=e.charAt(i))&&";"!==r&&","!==r;)i+=1;i<e.length&&"="===e.charAt(i)?(o=!0,i=s,a.push(e.substring(t,n)),t=i):i=n+1}else i+=1;(!o||i>=e.length)&&a.push(e.substring(t,e.length))}return a};function Tt({event:r,options:n,manifest:s,state:o,get_cookie_header:a,set_internal:i}){return(c,u)=>{const l=(async(c,u)=>{const l=Pt(c,u,r.url);let p=(c instanceof Request?c.mode:u?.mode)??"cors",d=(c instanceof Request?c.credentials:u?.credentials)??"same-origin";return n.hooks.handleFetch({event:r,request:l,fetch:async(c,u)=>{const h=Pt(c,u,r.url),f=new URL(h.url);if(h.headers.has("origin")||h.headers.set("origin",r.url.origin),c!==l&&(p=(c instanceof Request?c.mode:u?.mode)??"cors",d=(c instanceof Request?c.credentials:u?.credentials)??"same-origin"),"GET"!==h.method&&"HEAD"!==h.method||("no-cors"!==p||f.origin===r.url.origin)&&f.origin!==r.url.origin||h.headers.delete("origin"),f.origin!==r.url.origin){if(`.${f.hostname}`.endsWith(`.${r.url.hostname}`)&&"omit"!==d){const e=a(f,h.headers.get("cookie"));e&&h.headers.set("cookie",e)}return fetch(h)}const y=t||e,m=decodeURIComponent(f.pathname),g=(m.startsWith(y)?m.slice(y.length):m).slice(1),w=`${g}/index.html`,_=s.assets.has(g),v=s.assets.has(w);if(_||v){const e=_?g:w;if(o.read){const t=_?s.mimeTypes[g.slice(g.lastIndexOf("."))]:"text/html";return new Response(o.read(e),{headers:t?{"content-type":t}:{}})}return await fetch(h)}if("omit"!==d){const e=a(f,h.headers.get("cookie"));e&&h.headers.set("cookie",e);const t=r.request.headers.get("authorization");t&&!h.headers.has("authorization")&&h.headers.set("authorization",t)}h.headers.has("accept")||h.headers.set("accept","*/*"),h.headers.has("accept-language")||h.headers.set("accept-language",r.request.headers.get("accept-language"));const b=await Lt(h,n,s,{...o,depth:o.depth+1}),$=b.headers.get("set-cookie");if($)for(const e of Rt($)){const{name:t,value:r,...n}=At(e),s=n.path??(f.pathname.split("/").slice(0,-1).join("/")||"/");i(t,r,{path:s,...n})}return b}})})(c,u);return l.catch((()=>{})),l}}function Pt(e,t,r){return e instanceof Request?e:new Request("string"==typeof e?new URL(e,r):e,t)}let qt,Ct,Nt;const Ut=({html:e})=>e,Ht=()=>!1,Dt=({type:e})=>"js"===e||"css"===e,It=new Set(["GET","HEAD","POST"]),zt=new Set(["GET","HEAD","OPTIONS"]);async function Lt(t,r,n,o){const a=new URL(t.url);if(r.csrf_check_origin){if(C(t)&&("POST"===t.method||"PUT"===t.method||"PATCH"===t.method||"DELETE"===t.method)&&t.headers.get("origin")!==a.origin){const e=new N(403,`Cross-site ${t.method} form submissions are forbidden`);return"application/json"===t.headers.get("accept")?h(e.body,{status:e.status}):d(e.body.message,{status:e.status})}}let i;try{i=_(a.pathname)}catch{return d("Malformed URI",{status:400})}let c=null,u={};if(e&&!o.prerendering?.fallback){if(!i.startsWith(e))return d("Not found",{status:404});i=i.slice(e.length)||"/"}if(i===`/${r.app_dir}/env.js`)return function(e){return qt??=`export const env=${JSON.stringify(s)}`,Ct??=`W/${Date.now()}`,Nt??=new Headers({"content-type":"application/javascript; charset=utf-8",etag:Ct}),e.headers.get("if-none-match")===Ct?new Response(void 0,{status:304,headers:Nt}):new Response(qt,{headers:Nt})}(t);const l=v(i);let p,f;if(l&&(i=b(i)||"/",a.pathname=b(a.pathname)+("1"===a.searchParams.get(Se)?"/":"")||"/",a.searchParams.delete(Se),p=a.searchParams.get(Oe)?.split("").map((e=>"1"===e)),a.searchParams.delete(Oe)),!o.prerendering?.fallback){const e=await n._.matchers();for(const t of n._.routes){const r=t.pattern.exec(i);if(!r)continue;const n=dt(r,t.params,e);if(n){c=t,u=$(n);break}}}const g={};let k={};const j={cookies:null,fetch:null,getClientAddress:o.getClientAddress||(()=>{throw new Error("@sveltejs/adapter-vercel does not specify getClientAddress. Please raise an issue")}),locals:{},params:u,platform:o.platform,request:t,route:{id:c?.id??null},setHeaders:e=>{for(const t in e){const r=t.toLowerCase(),n=e[t];if("set-cookie"===r)throw new Error("Use `event.cookies.set(name, value, options)` instead of `event.setHeaders` to set cookies");if(r in g)throw new Error(`"${t}" header is already set`);g[r]=n,o.prerendering&&"cache-control"===r&&(o.prerendering.cache=n)}},url:a,isDataRequest:l,isSubRequest:o.depth>0};let x={transformPageChunk:Ut,filterSerializedResponseHeaders:Ht,preload:Dt};try{if(c){if(a.pathname===e||a.pathname===e+"/")f="always";else if(c.page){const e=await Promise.all([...c.page.layouts.map((e=>null==e?e:n._.nodes[e]())),n._.nodes[c.page.leaf]()]);f=st(e,"trailingSlash")}else if(c.endpoint){const e=await c.endpoint();f=e.trailingSlash}if(!l){const e=m(a.pathname,f??"never");if(e!==a.pathname&&!o.prerendering?.fallback)return new Response(void 0,{status:308,headers:{"x-sveltekit-normalize":"1",location:(e.startsWith("//")?a.origin+e:e)+("?"===a.search?"":a.search)}})}}const{cookies:s,new_cookies:i,get_cookie_header:u,set_internal:h}=function(e,t,r){const n=e.headers.get("cookie")??"",s=ht(n,{decode:e=>e}),o=m(t.pathname,r),a={},i={httpOnly:!0,sameSite:"lax",secure:"localhost"!==t.hostname||"http:"!==t.protocol},c={get(e,r){const s=a[e];if(s&&bt(t.hostname,s.options.domain)&&$t(t.pathname,s.options.path))return s.value;const o=r?.decode||decodeURIComponent;return ht(n,{decode:o})[e]},getAll(e){const r=e?.decode||decodeURIComponent,s=ht(n,{decode:r});for(const n of Object.values(a))bt(t.hostname,n.options.domain)&&$t(t.pathname,n.options.path)&&(s[n.name]=n.value);return Object.entries(s).map((([e,t])=>({name:e,value:t})))},set(e,t,r){vt(r),u(e,t,{...i,...r})},delete(e,t){vt(t),c.set(e,"",{...t,maxAge:0})},serialize(e,r,n){vt(n);let s=n.path;return n.domain&&n.domain!==t.hostname||(s=w(o,s)),ft(e,r,{...i,...n,path:s})}};function u(e,r,n){let s=n.path;n.domain&&n.domain!==t.hostname||(s=w(o,s)),a[e]={name:e,value:r,options:{...n,path:s}}}return{cookies:c,new_cookies:a,get_cookie_header:function(e,t){const r={...s};for(const n in a){const t=a[n];if(!bt(e.hostname,t.options.domain))continue;if(!$t(e.pathname,t.options.path))continue;const s=t.options.encode||encodeURIComponent;r[t.name]=s(t.value)}if(t){const e=ht(t,{decode:e=>e});for(const t in e)r[t]=e[t]}return Object.entries(r).map((([e,t])=>`${e}=${t}`)).join("; ")},set_internal:u}}(t,a,f??"never");k=i,j.cookies=s,j.fetch=Tt({event:j,options:r,manifest:n,state:o,get_cookie_header:u,set_internal:h}),o.prerendering&&!o.prerendering.fallback&&y(a);const _=await r.hooks.handle({event:j,resolve:(e,s)=>async function(e,s){try{if(s&&(x={transformPageChunk:s.transformPageChunk||Ut,filterSerializedResponseHeaders:s.filterSerializedResponseHeaders||Ht,preload:s.preload||Dt}),o.prerendering?.fallback)return await nt({event:e,options:r,manifest:n,state:o,page_config:{ssr:!1,csr:!0},status:200,error:null,branch:[],fetched:[],resolve_opts:x});if(c){const s=e.request.method;let a;if(l)a=await async function(e,t,r,n,s,o,a){if(!t.page)return new Response(void 0,{status:404});try{const i=[...t.page.layouts,t.page.leaf],c=o??i.map((()=>!0));let u=!1;const l=new URL(e.url);l.pathname=m(l.pathname,a);const p={...e,url:l},d=i.map(((e,t)=>function(e){let t,r=!1;return()=>r?t:(r=!0,t=e())}((async()=>{try{if(u)return{type:"skip"};const r=null==e?e:await n._.nodes[e]();return Ee({event:p,state:s,node:r,parent:async()=>{const e={};for(let r=0;r<t;r+=1){const t=await d[r]();t&&Object.assign(e,t.data)}return e}})}catch(r){throw u=!0,r}})))),h=d.map((async(e,t)=>c[t]?e():{type:"skip"}));let f=h.length;const y=await Promise.all(h.map(((t,n)=>t.catch((async t=>{if(t instanceof U)throw t;return f=Math.min(f,n+1),{type:"error",error:await J(e,r,t),status:t instanceof N||t instanceof H?t.status:void 0}}))))),{data:g,chunks:w}=ut(e,r,y);return w?new Response(new ReadableStream({async start(e){e.enqueue(at.encode(g));for await(const t of w)e.enqueue(at.encode(t));e.close()},type:"bytes"}),{headers:{"content-type":"text/sveltekit-data","cache-control":"private, no-store"}}):it(g)}catch(i){const t=i;return t instanceof U?ct(t):it(await J(e,r,t),500)}}(e,c,r,n,o,p,f??"never");else if(!c.endpoint||c.page&&!function(e){const{method:t,headers:r}=e.request;return!(!T.includes(t)||P.includes(t))||("POST"!==t||"true"!==r.get("x-sveltekit-action"))&&"text/html"!==q(e.request.headers.get("accept")??"*/*",["*","text/html"])}(e)){if(!c.page)throw new Error("This should never happen");if(It.has(s))a=await pt(e,c.page,r,n,o,x);else{const e=new Set(zt),t=await n._.nodes[c.page.leaf]();if(t?.server?.actions&&e.add("POST"),"OPTIONS"===s)a=new Response(null,{status:204,headers:{allow:Array.from(e.values()).join(", ")}});else{a=z([...e].reduce(((e,t)=>(e[t]=!0,e)),{}),s)}}}else a=await async function(e,t,r){const n=e.request.method;let s=t[n]||t.fallback;if("HEAD"===n&&t.GET&&!t.HEAD&&(s=t.GET),!s)return z(t,n);const o=t.prerender??r.prerender_default;if(o&&(t.POST||t.PATCH||t.PUT||t.DELETE))throw new Error("Cannot prerender endpoints that have mutative methods");if(r.prerendering&&!o){if(r.depth>0)throw new Error(`${e.route.id} is not prerenderable`);return new Response(void 0,{status:204})}try{let t=await s(e);if(!(t instanceof Response))throw new Error(`Invalid response from route ${e.url.pathname}: handler should return a Response object`);return r.prerendering&&(t=new Response(t.body,{status:t.status,statusText:t.statusText,headers:new Headers(t.headers)}),t.headers.set("x-sveltekit-prerender",String(o))),t}catch(a){if(a instanceof U)return new Response(void 0,{status:a.status,headers:{location:a.location}});throw a}}(e,await c.endpoint(),o);if("GET"===t.method&&c.page&&c.endpoint){const e=a.headers.get("vary")?.split(",")?.map((e=>e.trim().toLowerCase()));e?.includes("accept")||e?.includes("*")||(a=new Response(a.body,{status:a.status,statusText:a.statusText,headers:new Headers(a.headers)}),a.headers.append("Vary","Accept"))}return a}return o.error&&e.isSubRequest?await fetch(t,{headers:{"x-sveltekit-error":"true"}}):o.error?d("Internal Server Error",{status:500}):0===o.depth?await ot({event:e,options:r,manifest:n,state:o,status:404,error:new H(404,"Not Found",`Not found: ${e.url.pathname}`),resolve_opts:x}):o.prerendering?d("not found",{status:404}):await fetch(t)}catch(a){return await W(e,r,a)}finally{e.cookies.set=()=>{throw new Error("Cannot use `cookies.set(...)` after the response has been generated")},e.setHeaders=()=>{throw new Error("Cannot use `setHeaders(...)` after the response has been generated")}}}(e,s).then((t=>{for(const e in g){t.headers.set(e,g[e])}return kt(t.headers,Object.values(k)),o.prerendering&&null!==e.route.id&&t.headers.set("x-sveltekit-routeid",encodeURI(e.route.id)),t}))});if(200===_.status&&_.headers.has("etag")){let e=t.headers.get("if-none-match");e?.startsWith('W/"')&&(e=e.substring(2));const r=_.headers.get("etag");if(e===r){const e=new Headers({etag:r});for(const t of["cache-control","content-location","date","expires","vary","set-cookie"]){const r=_.headers.get(t);r&&e.set(t,r)}return new Response(void 0,{status:304,headers:e})}}if(l&&_.status>=300&&_.status<=308){const e=_.headers.get("location");if(e)return ct(new U(_.status,e))}return _}catch(O){if(O instanceof U){const e=l?ct(O):c?.page&&we(j)?ve(O):B(O.status,O.location);return kt(e.headers,Object.values(k)),e}return await W(j,r,O)}}const Mt={get({type:e},t){throw new Error(`Cannot read values from $env/dynamic/${e} while prerendering (attempted to read env.${t.toString()}). Use $env/static/${e} instead`)}};class Wt{#l;#p;constructor(e){this.#l=a,this.#p=e}async init({env:e}){const t={public_prefix:this.#l.env_public_prefix,private_prefix:this.#l.env_private_prefix},r=function(e,{public_prefix:t,private_prefix:r}){return Object.fromEntries(Object.entries(e).filter((([e])=>e.startsWith(r)&&(""===t||!e.startsWith(t)))))}(e,t),n=function(e,{public_prefix:t,private_prefix:r}){return Object.fromEntries(Object.entries(e).filter((([e])=>e.startsWith(t)&&(""===r||!e.startsWith(r)))))}(e,t);if(i(c?new Proxy({type:"private"},Mt):r),u(c?new Proxy({type:"public"},Mt):n),p(n),!this.#l.hooks)try{const e=await l();this.#l.hooks={handle:e.handle||(({event:e,resolve:t})=>t(e)),handleError:e.handleError||(({})=>{}),handleFetch:e.handleFetch||(({request:e,fetch:t})=>t(e))}}catch(s){throw s}}async respond(e,t){return Lt(e,this.#l,this.#p,{...t,error:!1,depth:0})}}export{Wt as Server};
